!function(){"use strict";angular.module("app",["ionic","applicat.push.service","ngCordova","ngResource","ngTemplates","ngStorage","ngFileUpload","ngTagsInput"]).run(["$ionicPlatform","$rootScope","$stateParams","$state","$window","$ionicHistory","$ionicSideMenuDelegate","$timeout","$ionicModal","AuthService","Message","appStorage","PushService",function($ionicPlatform,$rootScope,$stateParams,$state,$window,$ionicHistory,$ionicSideMenuDelegate,$timeout,$ionicModal,AuthService,Message,appStorage,PushService){function isState(state){return state===$ionicHistory.currentStateName()}function areStates(states){return-1!==states.indexOf($ionicHistory.currentStateName())}function getState(){return $ionicHistory.currentStateName()}function goToState(state,params){$ionicSideMenuDelegate.toggleLeft(!1),$state.go(state,params)}function isParam(paramObj){for(var key in paramObj)if($stateParams[key]!==paramObj[key])return!1;return!0}function getParam(key){return $stateParams[key]}function toggleSideMenu(){appStorage.user||(appStorage.user={}),appStorage.user.profile_picture&&appStorage.user.nickname&&appStorage.user.phone||$rootScope.requestEditProfileModal.show(),$ionicSideMenuDelegate.toggleLeft()}function closeSideMenu(){$ionicSideMenuDelegate.toggleLeft(!1)}function loading(){Message.loading(),$timeout(function(){Message.hide()},2e3)}function goBack(){$ionicHistory.goBack()}function onReady(){$window.cordova&&$window.cordova.plugins.Keyboard&&($window.cordova.plugins.Keyboard.hideKeyboardAccessoryBar(!0),$state.go("main.home")),$window.StatusBar&&$window.StatusBar.styleDefault(),$window.cordova&&PushService.registerDevice(),$ionicPlatform.registerBackButtonAction(function(e){return e.preventDefault(),areStates(["main.home"])?ionic.Platform.exitApp():areStates(["main.postList"])?$stateParams.category?$state.go("main.postList",{type:$stateParams.type,category:null}):$state.go("main.home"):areStates(["main.announcement.list","main.boardList.category"])?$state.go("main.home"):areStates(["main.postDetail"])&&"main.daumMap"===$stateParams.prev?$state.go("main.daumMap",{id:$stateParams.id}):areStates(["main.favorite.saved"])?$state.go("main.postList",{type:"local"}):void $ionicHistory.goBack()},101)}$rootScope.isState=isState,$rootScope.areStates=areStates,$rootScope.getState=getState,$rootScope.isParam=isParam,$rootScope.getParam=getParam,$rootScope.goToState=goToState,$rootScope.toggleSideMenu=toggleSideMenu,$rootScope.loading=loading,$rootScope.goBack=goBack,$rootScope.closeSideMenu=closeSideMenu,$rootScope.appStorage=appStorage,$rootScope.$state=$state,$rootScope.$stateParams=$stateParams,$rootScope.mainType=null,$ionicPlatform.ready(onReady),$ionicModal.fromTemplateUrl("state/modal/requestEditProfile.html",{scope:$rootScope,animation:"mh-slide"}).then(function(modal){$rootScope.requestEditProfileModal=modal}),$rootScope.handleCloseEditProfileModal=function(){appStorage.token?appStorage.token&&($rootScope.requestEditProfileModal.hide(),$state.go("main.profile"),closeSideMenu()):($rootScope.requestEditProfileModal.hide(),$state.go("main.login"),closeSideMenu())},$state.go("main.home")}]).config(["$stateProvider","$httpProvider",function($stateProvider,$httpProvider){$httpProvider.interceptors.push("AuthInterceptor"),$stateProvider.state("main",{url:"/main",templateUrl:"state/0main/main.html",controller:"MainController as Main"}).state("main.daumMap",{url:"/daumMap/:id/:findMe",views:{main:{templateUrl:"state/daumMap/daumMap.html",controller:"DaumMapController as Map"}}}).state("main.signup",{url:"/signup",views:{main:{templateUrl:"state/signup/signup.html",controller:"SignupController as Signup"}}}).state("main.login",{url:"/login",views:{main:{templateUrl:"state/login/login.html",controller:"LoginController as Login"}}}).state("main.profile",{url:"/profile",views:{main:{templateUrl:"state/profile/profile.html",controller:"ProfileController as Profile"}}}).state("main.favorite",{url:"/favorite",views:{main:{templateUrl:"state/favorite/favorite.html",controller:"FavoriteController as Favorite"}}}).state("main.favorite.saved",{url:"/saved/:type/:by",views:{favorite:{templateUrl:"state/favoriteSaved/saved.html",controller:"SavedController as Saved"}}}).state("main.home",{url:"/home",views:{main:{templateUrl:"state/home/home.html",controller:"HomeController as Home"}}}).state("main.postList",{url:"/postList/:type/:category",views:{main:{templateUrl:"state/postList/postList.html",controller:"PostListController as PostList"}}}).state("main.postDetail",{url:"/postDetail/:type/:id/:prev",views:{main:{templateUrl:"state/postDetail/postDetail.html",controller:"PostDetailController as PostDetail"}}}).state("main.postRegister",{url:"/postRegister/:type/:method/:id",views:{main:{templateUrl:"state/postRegister/postRegister.html",controller:"PostRegisterController as PostRegister"}}}).state("main.myPostList",{url:"/myPostList/:type",views:{main:{templateUrl:"state/myPostList/myPostList.html",controller:"MyPostListController as MyPostList"}}}).state("main.messageList",{url:"/messageList",views:{main:{templateUrl:"state/messageList/messageList.html",controller:"MessageListController as MessageList"}}}).state("main.messageDetail",{url:"/messageDetail/:from/:nickname",views:{main:{templateUrl:"state/messageDetail/messageDetail.html",controller:"MessageDetailController as MessageDetail"}}}).state("main.boardList",{"abstract":!0,url:"/boardList",views:{main:{templateUrl:"state/boardList/boardList.html",controller:"BoardListController as BoardList"}}}).state("main.boardList.category",{url:"/category/:by",views:{boardList:{templateUrl:"state/boardListCategory/category.html",controller:"CategoryController as Category"}}}).state("main.announcement",{"abstract":!0,url:"/announcement",views:{main:{templateUrl:"state/announcement/announcement.html",controller:"AnnouncementController as Announcement"}}}).state("main.announcement.list",{url:"/list/:by",views:{announcement:{templateUrl:"state/announcementList/announcementList.html",controller:"AnnouncementListController as AnnouncementList"}}}).state("main.announcementDetail",{url:"/announcementDetail/:by/:id",views:{main:{templateUrl:"state/announcementDetail/announcementDetail.html",controller:"AnnouncementDetailController as AnnouncementDetail"}}}).state("main.map",{url:"/map/:id",views:{main:{templateUrl:"state/map/map.html",controller:"MapController as Map2"}}}).state("main.googleMap",{url:"/googleMap/:id",views:{main:{templateUrl:"state/googleMap/googleMap.html"}}})}])}(),function(){"use strict";angular.module("app").constant("governorUrl","http://52.68.158.234").constant("appName","schoolMarket").constant("appId",3).constant("googlePushSenderID","80216654611").constant("kakaoKey","bdb254de02ea0b7521635ba469608674").constant("facebookKey","442354165953949")}(),function(){"use strict";angular.module("app").value("Schools",[{text:"동양미래대학교"},{text:"명지전문대학"},{text:"배화여자대학교"},{text:"삼육보건대학교"},{text:"서울여자간호대학교"},{text:"서일대학교"},{text:"숭의여자대학교"},{text:"인덕대학교"},{text:"한국폴리텍대학(서울강서캠퍼스)"},{text:"한국폴리텍대학(서울정수캠퍼스)"},{text:"한양여자대학교"},{text:"경남정보대학교"},{text:"경인여자대학교"},{text:"계명문화대학교"},{text:"광주보건대학교"},{text:"기독간호대학교"},{text:"대구공업대학교"},{text:"대구과학대학교"},{text:"대구보건대학교"},{text:"대덕대학교"},{text:"대동대학교"},{text:"대전과학기술대학교"},{text:"대전보건대학교"},{text:"동강대학교"},{text:"동부산대학교"},{text:"동의과학대학교"},{text:"동주대학교"},{text:"부산경상대학교"},{text:"부산과학기술대학교"},{text:"부산여자대학교"},{text:"부산예술대학교"},{text:"서영대학교"},{text:"수성대학교"},{text:"영남이공대학교"},{text:"영진사이버대학"},{text:"영진전문대학"},{text:"우송정보대학"},{text:"울산과학대학교"},{text:"울산과학대학교 (서부캠퍼스)"},{text:"인천재능대학교"},{text:"인하공업전문대학"},{text:"제주관광대학교"},{text:"제주한라대학교"},{text:"조선간호대학교"},{text:"조선이공대학교"},{text:"춘해보건대학교"},{text:"한국영상대학교"},{text:"한국폴리텍대학"},{text:"한국폴리텍대학 (광주2캠퍼스)"},{text:"한국폴리텍대학 (광주캠퍼스)"},{text:"한국폴리텍대학 (남인천캠퍼스)"},{text:"한국폴리텍대학 (달성캠퍼스)"},{text:"한국폴리텍대학 (대구캠퍼스)"},{text:"한국폴리텍대학 (대전캠퍼스)"},{text:"한국폴리텍대학 (동부산캠퍼스)"},{text:"한국폴리텍대학 (부산캠퍼스)"},{text:"한국폴리텍대학 (섬유패션캠퍼스)"},{text:"한국폴리텍대학 (울산캠퍼스)"},{text:"한국폴리텍대학 (인천캠퍼스)"},{text:"한국폴리텍대학 (제주캠퍼스)"},{text:"ICT폴리텍대학"},{text:"경기과학기술대학교"},{text:"경민대학교"},{text:"경복대학교"},{text:"경복대학교 (포천캠퍼스)"},{text:"계원예술대학교"},{text:"국제대학교"},{text:"김포대학교"},{text:"농협대학교"},{text:"대림대학교"},{text:"동남보건대학교"},{text:"동서울대학교"},{text:"동아방송예술대학교"},{text:"동원대학교"},{text:"두원공과대학교"},{text:"두원공과대학교 (파주캠퍼스)"},{text:"부천대학교"},{text:"서영대학교 (파주캠퍼스)"},{text:"서울예술대학교"},{text:"서정대학교"},{text:"수원과학대학교"},{text:"수원여자대학교"},{text:"수원여자대학교 (해란캠퍼스)"},{text:"신구대학교"},{text:"신안산대학교"},{text:"안산대학교"},{text:"여주대학교"},{text:"연성대학교"},{text:"오산대학교"},{text:"용인송담대학교"},{text:"웅지세무대학교"},{text:"유한대학교"},{text:"장안대학교"},{text:"청강문화산업대학교"},{text:"한국관광대학교"},{text:"한국농수산대학"},{text:"한국복지대학교"},{text:"한국폴리텍대학 (성남캠퍼스)"},{text:"한국폴리텍대학 (안성캠퍼스)"},{text:"한국폴리텍대학 (화성캠퍼스)"},{text:"강릉영동대학교"},{text:"강원관광대학교"},{text:"강원도립대학"},{text:"상지영서대학교"},{text:"세경대학교"},{text:"송곡대학교"},{text:"송호대학교"},{text:"한국골프대학교"},{text:"한국폴리텍대학 (강릉캠퍼스)"},{text:"한국폴리텍대학 (원주캠퍼스)"},{text:"한국폴리텍대학 (춘천2캠퍼스)"},{text:"한국폴리텍대학 (춘천캠퍼스)"},{text:"한림성심대학교"},{text:"강동대학교"},{text:"대원대학교"},{text:"백석문화대학교"},{text:"신성대학교"},{text:"아주자동차대학"},{text:"천안연암대학"},{text:"충남도립대학교"},{text:"충북도립대학"},{text:"충북보건과학대학교"},{text:"충청대학교"},{text:"한국영상대학교"},{text:"한국폴리텍대학 (바이오캠퍼스)"},{text:"한국폴리텍대학 (아산캠퍼스)"},{text:"한국폴리텍대학 (청주캠퍼스)"},{text:"한국폴리텍대학 (충주캠퍼스)"},{text:"한국폴리텍대학 (홍성캠퍼스)"},{text:"혜전대학교"},{text:"고구려대학교"},{text:"광양보건대학교"},{text:"군산간호대학교"},{text:"군장대학교"},{text:"동아인재대학교"},{text:"목포과학대학교"},{text:"백제예술대학교"},{text:"서해대학교"},{text:"순천제일대학교"},{text:"원광보건대학교"},{text:"전남과학대학교"},{text:"전남도립대학교"},{text:"전북과학대학교"},{text:"전주기전대학교"},{text:"전주비전대학교"},{text:"청암대학교"},{text:"한국폴리텍대학 (김제캠퍼스)"},{text:"한국폴리텍대학 (목포캠퍼스)"},{text:"한국폴리텍대학 (순천캠퍼스)"},{text:"한국폴리텍대학 (익산캠퍼스)"},{text:"한영대학"},{text:"가톨릭상지대학교"},{text:"거제대학교"},{text:"경남도립거창대학"},{text:"경남도립남해대학"},{text:"경북과학대학교"},{text:"경북도립대학교"},{text:"경북보건대학교"},{text:"경북전문대학교"},{text:"구미대학교"},{text:"김해대학교"},{text:"대경대학교"},{text:"대구미래대학교"},{text:"동원과학기술대학교"},{text:"마산대학교"},{text:"문경대학교"},{text:"서라벌대학교"},{text:"선린대학교"},{text:"성덕대학교"},{text:"안동과학대학교"},{text:"연암공업대학"},{text:"영남외국어대학"},{text:"영진전문대학 (글로벌캠퍼스)"},{text:"진주보건대학교"},{text:"창원문성대학"},{text:"포항대학교"},{text:"한국복지사이버대학"},{text:"한국승강기대학교"},{text:"한국폴리텍대학 (구미캠퍼스)"},{text:"한국폴리텍대학 (영주캠퍼스)"},{text:"한국폴리텍대학 (진주캠퍼스)"},{text:"한국폴리텍대학 (창원캠퍼스)"},{text:"한국폴리텍대학 (포항캠퍼스)"},{text:"한국폴리텍대학 (항공캠퍼스)"},{text:"호산대학교"},{text:"제주관광대학교"},{text:"제주한라대학교"},{text:"한국폴리텍대학 (제주캠퍼스)"},{text:"KC대학교"},{text:"가톨릭대학교 (성신교정)"},{text:"가톨릭대학교 (성의교정)"},{text:"감리교신학대학교"},{text:"건국대학교"},{text:"경기대학교 (서울캠퍼스)"},{text:"경희대학교"},{text:"경희사이버대학교"},{text:"고려대학교"},{text:"고려사이버대학교"},{text:"광운대학교"},{text:"국민대학교"},{text:"덕성여자대학교"},{text:"덕성여자대학교 (종로캠퍼스)"},{text:"동국대학교"},{text:"동덕여자대학교"},{text:"디지털서울문화예술대학교"},{text:"명지대학교"},{text:"사이버한국외국어대학교"},{text:"삼육대학교"},{text:"상명대학교"},{text:"서강대학교"},{text:"서경대학교"},{text:"서울과학기술대학교"},{text:"서울교육대학교"},{text:"서울기독대학교"},{text:"서울대학교"},{text:"서울대학교 (연건캠퍼스)"},{text:"서울디지털대학교"},{text:"서울사이버대학교"},{text:"서울시립대학교"},{text:"서울여자대학교"},{text:"서울여자대학교 (대학로캠퍼스)"},{text:"성공회대학교"},{text:"성균관대학교"},{text:"성신여자대학교"},{text:"성신여자대학교 (미아운정그린캠퍼스)"},{text:"세종대학교"},{text:"세종사이버대학교"},{text:"숙명여자대학교"},{text:"숭실대학교"},{text:"숭실사이버대학교"},{text:"연세대학교"},{text:"열린사이버대학교"},{text:"육군사관학교"},{text:"이화여자대학교"},{text:"인제대학교 (서울캠퍼스)"},{text:"장로회신학대학교"},{text:"중앙대학교"},{text:"총신대학교"},{text:"추계예술대학교"},{text:"한국과학기술원 (서울캠퍼스)"},{text:"한국방송통신대학교"},{text:"한국방송통신대학교 (서울지역대학)"},{text:"한국성서대학교"},{text:"한국예술종합학교"},{text:"한국예술종합학교 (서초동캠퍼스)"},{text:"한국외국어대학교"},{text:"한국체육대학교"},{text:"한성대학교"},{text:"한양대학교"},{text:"한양사이버대학교"},{text:"한영신학대학교"},{text:"홍익대학교"},{text:"UNIST"},{text:"가천대학교 (메디컬캠퍼스)"},{text:"건양대학교대전메디컬캠퍼스"},{text:"건양사이버대학교"},{text:"경북대학교"},{text:"경성대학교"},{text:"경인교육대학교"},{text:"계명대학교"},{text:"계명대학교 (대명캠퍼스)"},{text:"고려대학교 (세종캠퍼스)"},{text:"고신대학교"},{text:"고신대학교 (송도캠퍼스)"},{text:"광신대학교"},{text:"광주과학기술원"},{text:"광주교육대학교"},{text:"광주대학교"},{text:"광주여자대학교"},{text:"국군간호사관학교"},{text:"남부대학교"},{text:"대구가톨릭대학교 (루가캠퍼스)"},{text:"대구가톨릭대학교 (유스티노캠퍼스)"},{text:"대구경북과학기술원"},{text:"대구교육대학교"},{text:"대구대학교 (대명동캠퍼스)"},{text:"대구한의대학교 (수성캠퍼스)"},{text:"대전가톨릭대학교"},{text:"대전대학교"},{text:"대전신학대학교"},{text:"동명대학교"},{text:"동서대학교"},{text:"동아대학교"},{text:"동아대학교 (구덕캠퍼스)"},{text:"동아대학교 (부민캠퍼스)"},{text:"동의대학교"},{text:"동의대학교 (양정캠퍼스)"},{text:"목원대학교"},{text:"배재대학교"},{text:"부경대학교"},{text:"부경대학교 (용당캠퍼스)"},{text:"부산가톨릭대학교"},{text:"부산가톨릭대학교 (메리놀교정)"},{text:"부산가톨릭대학교 (신학교정)"},{text:"부산교육대학교"},{text:"부산대학교"},{text:"부산디지털대학교"},{text:"부산외국어대학교"},{text:"송원대학교"},{text:"신라대학교"},{text:"안양대학교 (강화캠퍼스)"},{text:"연세대학교 (국제캠퍼스)"},{text:"영남대학교 (대구캠퍼스)"},{text:"영산대학교 (해운대캠퍼스)"},{text:"우송대학교"},{text:"울산대학교"},{text:"을지대학교"},{text:"인제대학교 (부산캠퍼스)"},{text:"인천가톨릭대학교"},{text:"인천가톨릭대학교 (송도캠퍼스)"},{text:"인천대학교"},{text:"인천대학교 (미추홀캠퍼스)"},{text:"인천대학교 (제물포캠퍼스)"},{text:"인하대학교"},{text:"전남대학교"},{text:"제주국제대학교"},{text:"제주대학교"},{text:"제주대학교 (사라캠퍼스)"},{text:"조선대학교"},{text:"청운대학교 (인천캠퍼스)"},{text:"충남대학교"},{text:"충남대학교 (보운캠퍼스)"},{text:"침례신학대학교"},{text:"한국과학기술원"},{text:"한국과학기술원 (문지캠퍼스)"},{text:"한국방송통신대학교 (광주전남지역대학)"},{text:"한국방송통신대학교 (대구경북지역대학)"},{text:"한국방송통신대학교 (대전충남지역대학)"},{text:"한국방송통신대학교 (부산지역대학)"},{text:"한국방송통신대학교 (울산지역대학)"},{text:"한국방송통신대학교 (제주지역대학)"},{text:"한국해양대학교"},{text:"한남대학교"},{text:"한밭대학교"},{text:"한밭대학교 (대덕산학융합캠퍼스)"},{text:"호남대학교"},{text:"호남신학대학교"},{text:"홍익대학교 (세종캠퍼스)"},{text:"화신사이버대학교"},{text:"가천대학교"},{text:"가톨릭대학교"},{text:"강남대학교"},{text:"경기대학교"},{text:"경동대학교Metropol캠퍼스"},{text:"경인교육대학교 (경기캠퍼스)"},{text:"경찰대학"},{text:"경희대학교 (국제캠퍼스)"},{text:"국방대학교"},{text:"국제사이버대학교"},{text:"단국대학교"},{text:"대진대학교"},{text:"동국대학교 (바이오메디캠퍼스)"},{text:"루터대학교"},{text:"명지대학교 (자연캠퍼스)"},{text:"서울신학대학교"},{text:"서울장신대학교"},{text:"성결대학교"},{text:"성균관대학교 (자연과학캠퍼스)"},{text:"수원가톨릭대학교"},{text:"수원대학교"},{text:"신경대학교"},{text:"신한대학교"},{text:"신한대학교제2캠퍼스"},{text:"아세아연합신학대학교"},{text:"아주대학교"},{text:"안양대학교"},{text:"예원예술대학교 (양주캠퍼스)"},{text:"용인대학교"},{text:"을지대학교 (성남캠퍼스)"},{text:"중부대학교 (고양캠퍼스)"},{text:"중앙대학교 (안성캠퍼스)"},{text:"중앙승가대학교"},{text:"차의과학대학교"},{text:"총신대학교 (양지캠퍼스)"},{text:"칼빈대학교"},{text:"평택대학교"},{text:"한경대학교"},{text:"한국교통대학교 (의왕캠퍼스)"},{text:"한국산업기술대학교"},{text:"한국외국어대학교 (글로벌캠퍼스)"},{text:"한국항공대학교"},{text:"한세대학교"},{text:"한신대학교"},{text:"한양대학교 (ERICA캠퍼스)"},{text:"협성대학교"},{text:"가톨릭관동대학교"},{text:"강릉원주대학교"},{text:"강릉원주대학교 (원주캠퍼스)"},{text:"강원대학교"},{text:"강원대학교 (도계캠퍼스)"},{text:"강원대학교 (삼척캠퍼스)"},{text:"경동대학교"},{text:"경동대학교Medical캠퍼스 "},{text:"경동대학교설악제2캠퍼스 "},{text:"상지대학교 "},{text:"서울대학교 (평창캠퍼스)"},{text:"연세대학교 (원주캠퍼스)"},{text:"춘천교육대학교"},{text:"한국방송통신대학교 (강원지역대학)"},{text:"한라대학교"},{text:"한림대학교"},{text:"한중대학교"},{text:"건국대학교 (글로컬캠퍼스)"},{text:"건양대학교"},{text:"고신대학교 (세종캠퍼스)"},{text:"고신대학교 (천안캠퍼스)"},{text:"공군사관학교"},{text:"공주교육대학교"},{text:"공주대학교"},{text:"공주대학교 (예산캠퍼스)"},{text:"공주대학교 (천안캠퍼스)"},{text:"극동대학교"},{text:"글로벌사이버대학교"},{text:"금강대학교"},{text:"꽃동네대학교"},{text:"나사렛대학교"},{text:"남서울대학교"},{text:"단국대학교 (천안캠퍼스)"},{text:"대전가톨릭대학교"},{text:"백석대학교"},{text:"상명대학교 (천안캠퍼스)"},{text:"서남대학교 (아산캠퍼스)"},{text:"서원대학교"},{text:"선문대학교"},{text:"선문대학교 (천안캠퍼스)"},{text:"세명대학교"},{text:"세한대학교 (당진캠퍼스)"},{text:"순천향대학교"},{text:"영동대학교"},{text:"우석대학교 (진천캠퍼스)"},{text:"중부대학교"},{text:"중원대학교"},{text:"청운대학교"},{text:"청주교육대학교"},{text:"청주대학교"},{text:"충북대학교"},{text:"한국교원대학교"},{text:"한국교통대학교"},{text:"한국교통대학교 (증평캠퍼스)"},{text:"한국기술교육대학교"},{text:"한국기술교육대학교 (제2캠퍼스)"},{text:"한국방송통신대학교 (충북지역대학)"},{text:"한국전통문화대학교"},{text:"한서대학교"},{text:"한서대학교 (태안캠퍼스)"},{text:"호서대학교"},{text:"호서대학교 (천안캠퍼스)"},{text:"홍익대학교 (세종캠퍼스)"},{text:"광주가톨릭대학교"},{text:"군산대학교"},{text:"동신대학교"},{text:"목포가톨릭대학교"},{text:"목포대학교"},{text:"목포대학교 (목포캠퍼스)"},{text:"목포해양대학교"},{text:"서남대학교"},{text:"세한대학교"},{text:"순천대학교"},{text:"영산선학대학교"},{text:"예수대학교"},{text:"예원예술대학교"},{text:"우석대학교"},{text:"원광대학교"},{text:"원광디지털대학교"},{text:"전남대학교 (여수캠퍼스)"},{text:"전북대학교"},{text:"전북대학교 (고창캠퍼스)"},{text:"전북대학교 (특성화캠퍼스)"},{text:"전주교육대학교"},{text:"전주대학교"},{text:"초당대학교"},{text:"한국방송통신대학교 (전북지역대학)"},{text:"한려대학교"},{text:"한일장신대학교"},{text:"호원대학교"},{text:"가야대학교"},{text:"가야대학교 (고령캠퍼스)"},{text:"경남과학기술대학교"},{text:"경남대학교"},{text:"경북대학교 (상주캠퍼스)"},{text:"경상대학교"},{text:"경상대학교 (칠암캠퍼스)"},{text:"경상대학교 (통영캠퍼스)"},{text:"경운대학교 "},{text:"경일대학교 "},{text:"경주대학교"},{text:"금오공과대학교 "},{text:"김천대학교"},{text:"대구가톨릭대학교 "},{text:"대구대학교"},{text:"대구사이버대학교"},{text:"대구예술대학교"},{text:"대구외국어대학교 "},{text:"대구한의대학교 "},{text:"대구한의대학교 (오성캠퍼스)"},{text:"대신대학교 "},{text:"동국대학교 (경주캠퍼스)"},{text:"동양대학교 "},{text:"부산대학교 (밀양캠퍼스)"},{text:"부산대학교 (양산캠퍼스)"},{text:"부산장신대학교 "},{text:"안동대학교 "},{text:"영남대학교"},{text:"영남신학대학교 "},{text:"영산대학교 "},{text:"위덕대학교"},{text:"육군3사관학교 "},{text:"인제대학교"},{text:"진주교육대학교"},{text:"창신대학교 "},{text:"창원대학교"},{text:"포항공과대학교"},{text:"한국국제대학교"},{text:"한국방송통신대학교 (경남지역대학)"},{text:"한동대학교"},{text:"해군사관학교"},{text:"제주국제대학교"},{text:"제주대학교"},{text:"제주대학교 (사라캠퍼스)"},{text:"한국방송통신대학교 (제주지역대학)"}])}(),function(){"use strict";function Bookings($resource,governorUrl,$cordovaFileTransfer){var bookingUrl=governorUrl+"/booking/:list/:image/:mine/:dateBetween/:request",params={list:"@list",image:"@image",mine:"@mine",dateBetween:"@dateBetween"},actions={getBookings:{method:"GET",params:{list:"list"}},getMyBookings:{method:"GET",params:{list:"list",mine:"mine"}},getBookingsDateBetween:{method:"GET",params:{dateBetween:"dateBetween"}},findById:{method:"GET"},createBooking:{method:"POST"},requestBooking:{method:"POST",params:{request:"request"}},updateBooking:{method:"PUT",isArray:!0,headers:{"Content-Type":"text/plain"}},removeBooking:{method:"DELETE"}},service=$resource(bookingUrl,params,actions);return service.createBookingWithImage=function(parameters,booking){angular.extend(booking,parameters);var filePath=booking.file;delete booking.file;var options={params:booking,chunkedMode:!1};return{$promise:$cordovaFileTransfer.upload(governorUrl+"/booking/image",filePath,options)}},service.updateBookingWithImage=function(parameters,booking){angular.extend(booking,parameters);var filePath=booking.file;delete booking.file;var options={params:booking,chunkedMode:!1,httpMethod:"PUT"};return{$promise:$cordovaFileTransfer.upload(governorUrl+"/booking/image",filePath,options)}},service}angular.module("app").factory("Bookings",Bookings),Bookings.$inject=["$resource","governorUrl","$cordovaFileTransfer"]}(),function(){"use strict";function Comments($resource,governorUrl){var commentUrl=governorUrl+"/:post/:comment/:reply",params={post:"@post",comment:"@comment",reply:"@reply"},actions={addCommentToPost:{method:"POST",params:{post:"post",comment:"comment"}},reply:{method:"POST",params:{comment:"comment",reply:"reply"}},find:{method:"GET",params:{comment:"comment"},isArray:!0}},service=$resource(commentUrl,params,actions);return service}angular.module("app").factory("Comments",Comments),Comments.$inject=["$resource","governorUrl"]}(),function(){"use strict";function Contacts($resource,governorUrl){var deviceUrl=governorUrl+"/:contact/:admin",params={contact:"@contact",admin:"@admin"},actions={contactAdmin:{method:"POST",params:{contact:"contact",admin:"admin"}}},service=$resource(deviceUrl,params,actions);return service}angular.module("app").factory("Contacts",Contacts),Contacts.$inject=["$resource","governorUrl"]}(),function(){"use strict";function Devices($resource,governorUrl,PushService){var deviceUrl=governorUrl+"/device/:sendMessageAll",params={sendMessageAll:"@sendMessageAll"},actions={pushAll:{method:"GET",params:{sendMessageAll:"sendMessageAll"}},register:{method:"POST"},update:{method:"PUT"}},service=$resource(deviceUrl,params,actions);return service.getDeviceIdSync=function(){var deviceId=PushService.getDeviceId();return deviceId},service}angular.module("app").factory("Devices",Devices),Devices.$inject=["$resource","governorUrl","PushService"]}(),function(){"use strict";function Likes($resource,governorUrl){var likesUrl=governorUrl+"/post/:like/:unlike",params={like:"@like",unlike:"@unlike"},actions={likePost:{method:"POST"},unlikePost:{method:"DELETE"}},service=$resource(likesUrl,params,actions);return service}angular.module("app").factory("Likes",Likes),Likes.$inject=["$resource","governorUrl"]}(),function(){"use strict";function Messages($resource,governorUrl){var likesUrl=governorUrl+"/message/:sender/:list",params={sender:"@sender",list:"@list"},actions={getMyInboxSenderList:{method:"GET",params:{sender:"sender",list:"list"}},readMessagesFrom:{method:"GET"},sendMessage:{method:"POST"}},service=$resource(likesUrl,params,actions);return service}angular.module("app").factory("Messages",Messages),Messages.$inject=["$resource","governorUrl"]}(),function(){"use strict";function Photos($resource,governorUrl,AuthService,$cordovaFileTransfer){var photosUrl=governorUrl+"/photo",params={},actions={removePhoto:{method:"DELETE"}},service=$resource(photosUrl,params,actions);return service.uploadPhoto=function(parameters,post){angular.extend(post,parameters);var filePath=post.file?post.file:"[]";delete post.file;var options={params:post,chunkedMode:!1,headers:{Connection:"close",Authorization:"Bearer "+AuthService.getToken()}};return{$promise:$cordovaFileTransfer.upload(governorUrl+"/photo",filePath,options,!0)}},service}angular.module("app").factory("Photos",Photos),Photos.$inject=["$resource","governorUrl","AuthService","$cordovaFileTransfer"]}(),function(){"use strict";function Places($resource,governorUrl,$cordovaFileTransfer){var placeUrl=governorUrl+"/place/:list/:mine/:within/:image:photos",params={list:"@list",mine:"@mine",within:"@within",image:"@image",photos:"@photos"},actions={getPlaces:{method:"GET",params:{list:"list"}},getMyPlaces:{method:"GET",params:{list:"list",mine:"mine"}},getPlacesWithin:{method:"GET",params:{list:"list",within:"within"}},getPlacePhotos:{method:"GET",params:{photos:"photos"},isArray:!0},findById:{method:"GET"},createPlace:{method:"POST"},createPlaceWithImage:{method:"POST",params:{image:"image"}},updatePlace:{method:"PUT",isArray:!0},updateMyPlace:{method:"PUT",params:{mine:"mine"},isArray:!0},updatePlaceWithImage:{method:"PUT",params:{image:"image"}},removePlace:{method:"DELETE"}},service=$resource(placeUrl,params,actions);return service.createPlaceWithImage=function(parameters,place){angular.extend(place,parameters);var filePath=place.file;delete place.file;var options={params:place,chunkedMode:!1};return{$promise:$cordovaFileTransfer.upload(governorUrl+"/place/image",filePath,options)}},service.updatePlaceWithImage=function(parameters,place){angular.extend(place,parameters);var filePath=place.file;delete place.file;var options={params:place,chunkedMode:!1,httpMethod:"PUT"};return{$promise:$cordovaFileTransfer.upload(governorUrl+"/place/image",filePath,options)}},service}angular.module("app").factory("Places",Places),Places.$inject=["$resource","governorUrl","$cordovaFileTransfer"]}(),function(){"use strict";function Posts($resource,governorUrl,$cordovaFileTransfer,AuthService){var postUrl=governorUrl+"/post/:list/:image/:mine/:like",params={list:"@list",image:"@image",mine:"@mine",like:"@like"},actions={getPosts:{method:"GET",params:{list:"list"}},getMyPosts:{method:"GET",params:{list:"list",mine:"mine"}},findById:{method:"GET"},createPost:{method:"POST"},updatePost:{method:"PUT"},likePost:{method:"POST",params:{like:"like"}},removePost:{method:"DELETE"}},service=$resource(postUrl,params,actions);return service.createPostWithImage=function(parameters,post){angular.extend(post,parameters);var filePath=post.file?post.file:"[]";delete post.file,post.category="SHOW-POST";var options={params:post,chunkedMode:!1,headers:{Connection:"close",Authorization:"Bearer "+AuthService.getToken()}};return{$promise:$cordovaFileTransfer.upload(governorUrl+"/post",filePath,options,!0)}},service.updatePostWithImage=function(parameters,post){angular.extend(post,parameters);var filePath=post.file;delete post.file;var options={params:post,chunkedMode:!1,httpMethod:"PUT",headers:{Connection:"close",Authorization:"Bearer "+AuthService.getToken()}};return{$promise:$cordovaFileTransfer.upload(governorUrl+"/post",filePath,options,!0)}},service}angular.module("app").factory("Posts",Posts),Posts.$inject=["$resource","governorUrl","$cordovaFileTransfer","AuthService"]}(),function(){"use strict";function Products($resource,governorUrl,$cordovaFileTransfer,_,$q,Upload,U){function createProductWithImage(params,product){angular.extend(product,params);var dataUri=U.toArray(product.dataUri);delete product.fileUri,delete product.dataUri;var filesToSend=[];angular.forEach(dataUri,function(data){filesToSend.push(U.imageDataToFile(data))});var promise=Upload.upload({url:governorUrl+"/product",file:filesToSend,method:"POST",fields:product,sendFieldsAs:"json",withCredentials:!1,chunkedMode:!1,headers:{Coonection:"close"}});return{$promise:promise}}var productUrl=governorUrl+"/product/:list/:image/:mine/:checkProductCode/:ids/:comments/:within/:like/:unlike/:setSoldOut/:unsetSoldOut",params={list:"@list",image:"@image",mine:"@mine",checkProductCode:"@checkProductCode",ids:"@ids",comments:"@comments",within:"@within",like:"@like",unlike:"@unlike",setSoldOut:"@setSoldOut",unsetSoldOut:"@unsetSoldOut"},actions={setSoldOut:{method:"PUT",params:{setSoldOut:"setSoldOut"}},unsetSoldOut:{method:"PUT",params:{unsetSoldOut:"unsetSoldOut"}},unlike:{method:"PUT",params:{unlike:"unlike"}},like:{method:"PUT",params:{like:"like"}},getProductWithin:{method:"GET",params:{list:"list",within:"within"}},getProductsWithComments:{method:"GET",params:{comments:"comments"},isArray:!0},getProductsWithIds:{method:"GET",params:{ids:"ids"},isArray:!0},getProducts:{method:"GET",params:{list:"list"}},getMyProducts:{method:"GET",params:{list:"list",mine:"mine"}},checkProductCode:{method:"GET",params:{checkProductCode:"checkProductCode"}},findById:{method:"GET"},createProduct:{method:"POST"},updateProduct:{method:"PUT"},removeProduct:{method:"DELETE"},removeProducts:{method:"DELETE",isArray:!0}},service=$resource(productUrl,params,actions);return service.createProductWithImage=createProductWithImage,service}angular.module("app").factory("Products",Products),Products.$inject=["$resource","governorUrl","$cordovaFileTransfer","_","$q","Upload","U"]}(),function(){"use strict";function RoyaltyPoints($resource,governorUrl){var royaltyUrl=governorUrl+"/royaltyPoint/:list/:mine",params={list:"@list",mine:"@mine"},actions={getRoyaltyPoints:{method:"GET",params:{list:"list"}},getMyRoyaltyPoints:{method:"GET",params:{list:"list",mine:"mine"}},findById:{method:"GET"},createRoyaltyPoint:{method:"POST"},updateRoyaltyPoint:{method:"PUT",isArray:!0},removeRoyaltyPoint:{method:"DELETE"}},service=$resource(royaltyUrl,params,actions);return service}angular.module("app").factory("RoyaltyPoints",RoyaltyPoints),RoyaltyPoints.$inject=["$resource","governorUrl"]}(),function(){"use strict";function Users($resource,governorUrl){var userUrl=governorUrl+"/:auth/:register/:user/:local/:checkNickname/:list/:role/:myrole/:update/:updateWithImage",params={auth:"@auth",register:"@register",user:"@user",checkNickname:"@checkNickname",list:"@list",role:"@role",myrole:"@myrole",updateWithImage:"@updateWithImage"},actions={getUsers:{method:"GET",params:{user:"user",list:"list"}},register:{method:"POST",params:{register:"register"}},checkNickname:{method:"GET",params:{user:"user",checkNickname:"checkNickname"}},login:{method:"POST",params:{auth:"auth",local:"local"}},getMyRole:{method:"GET",params:{role:"role",myrole:"myrole"}},updateProfileWithImage:{method:"PUT",params:{user:"user",updateWithImage:"updateWithImage"}},updateUser:{method:"PUT",params:{user:"user",update:"update"},isArray:!0}},service=$resource(userUrl,params,actions);return service}angular.module("app").factory("Users",Users),Users.$inject=["$resource","governorUrl"]}(),function(){"use strict";function daum($window){return $window.daum}angular.module("app").factory("daum",daum),daum.$inject=["$window"]}(),function(){"use strict";function Firebase($window){return $window.Firebase}angular.module("app").factory("Firebase",Firebase),Firebase.$inject=["$window"]}(),function(){"use strict";function google($window){return $window.google}angular.module("app").factory("google",google),google.$inject=["$window"]}(),function(){"use strict";function localStorage($window){return $window.localStorage}angular.module("app").factory("localStorage",localStorage),localStorage.$inject=["$window"]}(),function(){"use strict";function moment($window){return $window.moment}angular.module("app").factory("moment",moment),moment.$inject=["$window"]}(),function(){"use strict";function _($window){return $window._}angular.module("app").factory("_",_),_.$inject=["$window"]}(),function(){"use strict";function PushService($http,$log,$q,$cordovaDialogs,$window,$timeout,$rootScope,$cordovaMedia,googlePushSenderID,governorUrl){function registerDevice(){var push=$window.PushNotification.init({android:{senderID:googlePushSenderID,icon:"pushicon"},ios:{badge:!0,sound:"true",alert:"true"}});ionic.Platform.isIOS()&&push.getApplicationIconBadgeNumber(function(n){push.setApplicationIconBadgeNumber(function(){},function(){},n)},function(){}),push.on("registration",function(result){ionic.Platform.isIOS()?storeDeviceToken(result.registrationId,"IOS"):ionic.Platform.isAndroid()&&storeDeviceToken(result.registrationId,"ANDROID")}),push.on("notification",function(notification){ionic.Platform.isAndroid()?$window.plugin.notification.local.schedule({title:notification.title,text:notification.message,icon:"res://icon.png",smallIcon:"res://pushicon.png"}):ionic.Platform.isIOS()&&handleIOS(notification)})}function storeDeviceToken(deviceId,deviceType){var registration={deviceId:deviceId,platform:deviceType,active:!0};return $http({url:governorUrl+"/device",method:"POST",headers:{"Content-Type":"application/json"},data:registration}).then(function(dataWrapper){$log.info("PushService - registered to server: "+JSON.stringify(dataWrapper)),deviceId=dataWrapper.data.device.deviceId})["catch"](function(err){$log.info("PushService - error: "+JSON.stringify(err))})}function handleIOS(notification){if(notification.additionalData.foreground===!0){if(notification.sound){var audio=$cordovaMedia.newMedia(notification.sound);audio.then(function(r){$timeout(function(){audio.play()},500)},function(r){})}$cordovaDialogs.alert(notification.title,notification.message)}else $cordovaDialogs.alert(notification.title,notification.message)}var deviceId=null;this.registerDevice=registerDevice,this.getDeviceId=function(){return deviceId}}angular.module("applicat.push.service",["ngCordova"]).service("PushService",PushService),PushService.$inject=["$http","$log","$q","$cordovaDialogs","$window","$timeout","$rootScope","$cordovaMedia","googlePushSenderID","governorUrl"]}(),function(){"use strict";function U($window){function toArray(obj){var array=[];return Array.isArray(obj)?Array.isArray(obj)&&(array=obj):array=[obj],array}function imageDataToFile(imageData){var blob=dataURItoBlob(imageData);return blob}function dataURItoBlob(dataURI){var byteString,mimestring;byteString=-1!==dataURI.split(",")[0].indexOf("base64")?$window.atob(dataURI.split(",")[1]):$window.decodeURI(dataURI.split(",")[1]),mimestring=dataURI.split(",")[0].split(":")[1].split(";")[0];for(var content=[],i=0;i<byteString.length;i++)content[i]=byteString.charCodeAt(i);return new $window.Blob([new $window.Uint8Array(content)],{type:mimestring})}var service={toArray:toArray,imageDataToFile:imageDataToFile};return service}angular.module("app").factory("U",U),U.$inject=["$window"]}(),function(){"use strict";function appStorage($localStorage,appName){return $localStorage[appName]||($localStorage[appName]={}),$localStorage[appName]}angular.module("app").factory("appStorage",appStorage),appStorage.$inject=["$localStorage","appName"]}(),function(){"use strict";function AuthInterceptor(appStorage){function requestInterceptor(req){var token=appStorage.token;return token&&(req.headers.Authorization="Bearer "+token),req}return{request:requestInterceptor}}function AuthService(appStorage,$http,$q,$location,$state,governorUrl,LocalService,appName,kakaoKey,facebookKey,$cordovaOauth,$window){function getToken(){var token=appStorage.token;return token?token:void $state.go("main.login")}function register(user){var deferred=$q.defer();return $http({url:governorUrl+"/user/register",method:"post",headers:{"Content-Type":"application/json"
},params:user}).success(function(data,status,headers,config){deferred.resolve(data)}).error(function(data,status,headers,config){deferred.reject(data)}),deferred.promise}function registerWithImage(user,file,success,fail){var options=new FileUploadOptions,newUser=angular.copy(user);options.params=newUser,options.headers={Connection:"close"},options.chunkedMode=!1;var ft=new FileTransfer;ft.upload(file,encodeURI(governorUrl+"/user/registerWithImage"),success,fail,options,!0)}function login(email,password){var deferred=$q.defer();return $http({url:governorUrl+"/auth/local",method:"post",headers:{"Content-Type":"application/json"},data:{identifier:email,password:password}}).success(function(data,status,headers,config){appStorage.token=data.token,appStorage.user=data.user,deferred.resolve(data)}).error(function(data,status,headers,config){deferred.reject(data)}),deferred.promise}function verifyResetCode(email,code){var deferred=$q.defer();return $http({url:governorUrl+"/user/passwordresetcomplete",method:"put",headers:{"Content-Type":"application/json"},data:{email:email,code:code}}).success(function(data,status,headers,config){appStorage.user=data.user,appStorage.token=data.token,deferred.resolve(data)}).error(function(data,status,headers,config){deferred.reject(data)}),deferred.promise}function passReset(email){var deferred=$q.defer();return $http({url:governorUrl+"/user/resetStart",method:"post",headers:{"Content-Type":"application/json"},data:{email:email}}).success(function(data,status,headers,config){deferred.resolve(data)}).error(function(data,status,headers,config){deferred.reject(data)}),deferred.promise}function logout(){appStorage.user=null,appStorage.token=null}function changePassword(oldPassword,newPassword){var deferred=$q.defer();return $http({url:governorUrl+"/user/changePassword",method:"post",headers:{"Content-Type":"application/json"},data:{oldPassword:oldPassword,newPassword:newPassword}}).success(function(data,status,headers,config){deferred.resolve(data)}).error(function(data,status,headers,config){deferred.reject(data)}),deferred.promise}function checkNickname(nickname){var deferred=$q.defer();return $http({url:governorUrl+"/user/checknickname",method:"get",headers:{"Content-Type":"application/json"},params:{nickname:nickname}}).success(function(data,status,headers,config){deferred.resolve(data)}).error(function(data,status,headers,config){deferred.reject(data)}),deferred.promise}function checkEmail(email){var deferred=$q.defer();return $http({url:governorUrl+"/user/checkEmail",method:"get",headers:{"Content-Type":"application/json"},params:{email:email}}).success(function(data,status,headers,config){deferred.resolve(data)}).error(function(data,status,headers,config){deferred.reject(data)}),deferred.promise}function getMyProfile(){var deferred=$q.defer();return $http({url:governorUrl+"/user/profile",method:"get",headers:{"Content-Type":"application/json"}}).success(function(data,status,headers,config){deferred.resolve(data)}).error(function(data,status,headers,config){deferred.reject(data)}),deferred.promise}function updateMyProfile(nickname){var deferred=$q.defer();return $http({url:governorUrl+"/user/update",method:"put",headers:{"Content-Type":"application/json"},data:{nickname:nickname}}).success(function(data,status,headers,config){deferred.resolve(data)}).error(function(data,status,headers,config){deferred.reject(data)}),deferred.promise}function updateMyProfileWithImage(user,file,success,fail){var options=new FileUploadOptions,updateUser=angular.copy(user);options.params=updateUser,options.httpMethod="PUT",options.headers={Connection:"close",Authorization:"Bearer "+appStorage.token},options.chunkedMode=!1;var ft=new FileTransfer;ft.upload(file,encodeURI(governorUrl+"/user/updateWithImage"),success,fail,options,!0)}function loginWithFacebook(){var deferred=$q.defer();return $cordovaOauth.facebook(facebookKey,["email"]).then(function(result){result.provider="facebook",$http({url:governorUrl+"/auth/register",method:"post",headers:{"Content-Type":"application/json"},data:result}).success(function(data,status,headers,config){appStorage.user=data.user,appStorage.user.profile_picture=data.user.profile_image,appStorage.token=data.token,deferred.resolve(data)}).error(function(data,status,headers,config){deferred.reject(data)})},function(error){deferred.reject(error)}),deferred.promise}var service={getToken:getToken,register:register,registerWithImage:registerWithImage,login:login,verifyResetCode:verifyResetCode,passReset:passReset,logout:logout,changePassword:changePassword,checkNickname:checkNickname,checkEmail:checkEmail,getMyProfile:getMyProfile,updateMyProfile:updateMyProfile,updateMyProfileWithImage:updateMyProfileWithImage,loginWithFacebook:loginWithFacebook};return service}angular.module("app").factory("AuthInterceptor",AuthInterceptor),AuthInterceptor.$inject=["appStorage"],angular.module("app").service("AuthService",AuthService),AuthService.$inject=["appStorage","$http","$q","$location","$state","governorUrl","LocalService","appName","kakaoKey","facebookKey","$cordovaOauth","$window"]}(),function(){"use strict";function DistanceService(){function haversine(p1,p2){var R=6371,dLat=rad(p2.latitude-p1.latitude),dLong=rad(p2.longitude-p1.longitude),a=Math.sin(dLat/2)*Math.sin(dLat/2)+Math.cos(rad(p1.latitude))*Math.cos(rad(p2.latitude))*Math.sin(dLong/2)*Math.sin(dLong/2),c=2*Math.atan2(Math.sqrt(a),Math.sqrt(1-a)),d=R*c,meters=Math.round(1e3*d);return meters}function rad(x){return x*Math.PI/180}var service={between:haversine};return service}angular.module("app").factory("DistanceService",DistanceService),DistanceService.$inject=[]}(),function(){"use strict";function Dom($timeout,$window){function focusById(id){$timeout(function(){var domElement=$window.document.getElementById(id);domElement&&domElement.focus()})}var service={focusById:focusById};return service}angular.module("app").factory("Dom",Dom),Dom.$inject=["$timeout","$window"]}(),function(){"use strict";function FavoriteService(appStorage,Products){function like(postId){function processProduct(product){}function error(err){}return Products.like({postId:postId}).$promise.then(processProduct)["catch"](error)}function unlike(postId){function processProduct(product){}function error(err){}return Products.unlike({postId:postId}).$promise.then(processProduct)["catch"](error)}function toggleSaveToFavorite(id){if(Array.isArray(appStorage.favorite)||(appStorage.favorite=[]),isFavorite(id)){var index=appStorage.favorite.indexOf(id);appStorage.favorite.splice(index,1)}else isFavorite(id)||appStorage.favorite.push(id);return appStorage.favorite}function isFavorite(id){Array.isArray(appStorage.favorite)||(appStorage.favorite=[]);for(var i=0;i<appStorage.favorite.length;i++)if(String(id)===String(appStorage.favorite[i]))return!0;return!1}var service={like:like,unlike:unlike,toggleSaveToFavorite:toggleSaveToFavorite,isFavorite:isFavorite};return service}angular.module("app").factory("FavoriteService",FavoriteService),FavoriteService.$inject=["appStorage","Products"]}(),function(){"use strict";function ImageService(governorUrl,$cordovaCamera,$cordovaFile,Message,$window,$timeout,Upload){function get(params){function setOptions(){var sourceType;"gallery"===params.from?sourceType=0:"camera"===params.from&&(sourceType=1);var options={allowEdit:!0,quality:40,destinationType:Camera.DestinationType.FILE_URI,encodingType:Camera.EncodingType.JPEG,targetWidth:500,correctOrientation:!0,mediaType:Camera.MediaType.PICTURE,cameraDirection:Camera.Direction.BACK,sourceType:sourceType};return options}return $window.cordova?void $cordovaCamera.getPicture(setOptions()).then(function(filePath){params.fileUris.push(filePath);var name=filePath.substr(filePath.lastIndexOf("/")+1),namePath=filePath.substr(0,filePath.lastIndexOf("/")+1);return $cordovaFile.readAsDataURL(namePath,name)}).then(function(dataUri){$timeout(function(){params.dataUris.push(dataUri)},0)})["catch"](function(err){Message.alert("이미지 알림","이미지 불러오기 실패하였습니다. 갤러리에서 선택해주세요.")}):!1}function post(params,method){var dataUris=params.dataUris,fields=params.fields,url=params.url;"/"!==url[0]&&(url="/"+url),dataUris=wrapInArray(dataUris);var filesToSend=[];angular.forEach(dataUris,function(base64Data){filesToSend.push(base64ToFile(base64Data))});var promise=Upload.upload({url:governorUrl+url,method:method||"POST",file:filesToSend,fields:fields,header:{enctype:"multipart/form-data"}});return promise}function clean(){return $cordovaCamera.cleanup()}function wrapInArray(obj){var array=[];return Array.isArray(obj)?Array.isArray(obj)&&(array=obj):array=[obj],array}function base64ToFile(dataUris){var byteString,mimestring;byteString=-1!==dataUris.split(",")[0].indexOf("base64")?$window.atob(dataUris.split(",")[1]):decodeURI(dataUris.split(",")[1]),mimestring=dataUris.split(",")[0].split(":")[1].split(";")[0];for(var content=[],i=0;i<byteString.length;i++)content[i]=byteString.charCodeAt(i);return new $window.Blob([new $window.Uint8Array(content)],{type:mimestring})}var service={get:get,post:post,clean:clean};return service}angular.module("app").factory("ImageService",ImageService),ImageService.$inject=["governorUrl","$cordovaCamera","$cordovaFile","Message","$window","$timeout","Upload"]}(),function(){"use strict";function LinkService($window,$cordovaSocialSharing,appStorage,Message,$state){function call(number){return appStorage.token?void($window.location.href="tel:"+number):Message.alert("전화걸기 알림","로그인을 해주세요.").then(function(){$state.go("main.login")})}function open(link,type){return"_system"===type?$window.open(link,"_system"):$window.open(link,"_blank","location=no")}function share(title,content,url){return $cordovaSocialSharing.share(title,content,null,url).then(function(suc){},function(err){})}var service={call:call,open:open,share:share};return service}angular.module("app").factory("LinkService",LinkService),LinkService.$inject=["$window","$cordovaSocialSharing","appStorage","Message","$state"]}(),function(){"use strict";angular.module("app").factory("LocalService",function(){return{get:function(key){return localStorage.getItem(key)},set:function(key,val){return localStorage.setItem(key,val)},unset:function(key){return localStorage.removeItem(key)},getSession:function(key){return sessionStorage.getItem(key)},setSession:function(key,val){return sessionStorage.setItem(key,val)},unsetSession:function(key){return sessionStorage.removeItem(key)}}})}(),function(){"use strict";function Message($ionicLoading,$ionicPopup){function loadingDefault(message){$ionicLoading.show(message)}function loadingHide(){$ionicLoading.hide()}function messageSuccess(message){$ionicLoading.show({template:'<h4 class="message-success">'+message+"</h4>",duration:2e3})}function messageError(message){$ionicLoading.show({template:'<h4 class="message-error">'+message+"</h4>",duration:2e3})}function popUpAlertDefault(title,message){return loadingHide(),$ionicPopup.alert({title:title||"인터넷이 끊겼습니다.",template:message||"인터넷을 켜주세요."})}var service={loading:loadingDefault,hide:loadingHide,success:messageSuccess,error:messageError,alert:popUpAlertDefault};return service}angular.module("app").factory("Message",Message),Message.$inject=["$ionicLoading","$ionicPopup"]}(),function(){"use strict";function MockService(){function generatePosts(array,numberOfPosts,reset){reset&&angular.copy([],array);for(var i=1;numberOfPosts>=i;i++){var post={id:i,title:"학교장터 "+i+"번 상품",summary:"학교장터 "+i+"번 상품 정말 좋습니다.",content:"학교장터 "+i+"번 상품은 2014년 12월 "+i+"일에 완성된 상품이며, 거의 사용하지 않은 상품입니다.",photos:[{url:"http://lorempixel.com/100/200/technics/"+i}],likes:i+10,commentsCount:i,comments:[{id:1,name:"호도리",content:"정말 좋네요"},{id:2,name:"호도리",content:"정말 좋네요"},{id:3,name:"호도리",content:"정말 좋네요"},{id:4,name:"호도리",content:"정말 좋네요"},{id:5,name:"호도리",content:"정말 좋네요"}],category:"기타",price:1e4+1e3*i,address:"중국 베이징 스징고라리고 고릴라 왕"};array.push(post)}}var service={generatePosts:generatePosts};return service}angular.module("app").factory("MockService",MockService),MockService.$inject=[]}(),function(){"use strict";function rootScopeService($state,$stateParams,$ionicHistory,$ionicSideMenuDelegate,Message,$timeout,appStorage){function isParam(paramObj){for(var key in paramObj)if($stateParams[key]!==paramObj[key])return!1;return!0}function getParam(key){return $stateParams[key]}function isState(state){return state===$ionicHistory.currentStateName()}function goToState(state,params){$ionicSideMenuDelegate.toggleLeft(!1),$state.go(state,params)}function goBack(){$ionicHistory.goBack()}function loading(){Message.loading(),$timeout(function(){Message.hide()},2e3)}function closeSideMenu(){$ionicSideMenuDelegate.toggleLeft(!1)}function toggleSideMenu(){$ionicSideMenuDelegate.toggleLeft()}var service={appStorage:appStorage,$state:$state,$stateParams:$stateParams,isParam:isParam,getParam:getParam,isState:isState,goToState:goToState,goBack:goBack,loading:loading,toggleSideMenu:toggleSideMenu,closeSideMenu:closeSideMenu};return service}angular.module("app").factory("rootScopeService",rootScopeService),rootScopeService.$inject=["$state","$stateParams","$ionicHistory","$ionicSideMenuDelegate","Message","$timeout","appStorage"]}(),function(){"use strict";function parentScroll($ionicScrollDelegate,$timeout,$window,$document){function compile(element,attr){return $window.horizontalIonScrollCount||($window.horizontalIonScrollCount=0),$window.horizontalIonScrollCount++,attr.delegateHandle="horizontal"+$window.horizontalIonScrollCount,function(scope,element,attr){$timeout(function(){var horizontal=attr.delegateHandle,sv=$ionicScrollDelegate.$getByHandle(horizontal).getScrollView(),container=sv.__container,originaltouchStart=sv.touchStart,originalmouseDown=sv.mouseDown,originaltouchMove=sv.touchMove,originalmouseMove=sv.mouseMove;container.removeEventListener("touchstart",sv.touchStart),container.removeEventListener("mousedown",sv.mouseDown),$document.removeEventListener("touchmove",sv.touchMove),$document.removeEventListener("mousemove",sv.mousemove),sv.touchStart=function(e){e.preventDefault=function(){},originaltouchStart.apply(sv,[e])},sv.touchMove=function(e){e.preventDefault=function(){},originaltouchMove.apply(sv,[e])},sv.mouseDown=function(e){e.preventDefault=function(){},originalmouseDown&&originalmouseDown.apply(sv,[e])},sv.mouseMove=function(e){e.preventDefault=function(){},originalmouseMove&&originalmouseMove.apply(sv,[e])},container.addEventListener("touchstart",sv.touchStart,!1),container.addEventListener("mousedown",sv.mouseDown,!1),$document.addEventListener("touchmove",sv.touchMove,!1),$document.addEventListener("mousemove",sv.mouseMove,!1)})}}return{scope:!0,restrict:"A",compile:compile}}angular.module("app").directive("parentScroll",parentScroll),parentScroll.$inject=["$ionicScrollDelegate","$timeout","$window","$document"]}(),function(angular){"use strict";function ngEnter($window){return function(scope,element,attrs){element.bind("keydown keypress",function(event){13===event.which&&(scope.$apply(function(){scope.$eval(attrs.ngEnter)}),$window.cordova&&$window.cordova.plugins.Keyboard.close(),event.preventDefault())})}}angular.module("app").directive("ngEnter",ngEnter),ngEnter.$inject=["$window"]}(angular),function(){"use strict";function onFinishRender($timeout){function link(scope){scope.$last===!0&&$timeout(function(){scope.$emit("ngRepeatFinished")})}return{restrict:"A",link:link}}angular.module("app").directive("onFinishRender",onFinishRender),onFinishRender.$inject=["$timeout"]}(),function(){"use strict";function touch($timeout){function link(scope,element){element.on("click",function(){element.addClass("touch"),$timeout(function(){element.removeClass("touch")},50)})}return{restrict:"A",link:link}}angular.module("app").directive("touch",touch),touch.$inject=["$timeout"]}(),function(){"use strict";function vw($rootScope,$window){function link(scope,element){$rootScope.vw=element.prop("offsetWidth"),$window.addEventListener("resize",function(){$rootScope.$apply(function(){$rootScope.windowWidth=element.prop("offsetWidth")})})}return{link:link}}angular.module("app").directive("vw",vw),vw.$inject=["$rootScope","$window"]}(),function(){"use strict";function categoryToKorean(){return function(input){return"maleCloth"===input?"남성의류":"femaleCloth"===input?"여성의류":"book"===input?"서적":"help"===input?"도와줘":"room"===input?"방":"donation"===input?"재능기부":"homeDeco"===input?"가전":"etc"===input?"기타":"유학장터"}}angular.module("app").filter("categoryToKorean",categoryToKorean),categoryToKorean.$inject=[]}(),function(){"use strict";function cloudinaryFilter(size){var matching=/upload/;return function(input){if(input){var index=input.search(matching);return input.substring(0,index)+"upload/c_scale,w_"+size+"/"+input.substring(input.lastIndexOf("/"))}return input}}angular.module("app").filter("cloudinary150",cloudinaryFilter.bind(null,150)).filter("cloudinary600",cloudinaryFilter.bind(null,600))}(),function(){"use strict";function mToKm(){return function(input){return input>=1e3?(input/1e3).toFixed(2)+"km":input+"m"}}angular.module("app").filter("mToKm",mToKm),mToKm.$inject=[]}(),function(){"use strict";function groupByOpeningHours(_){function filter(openingHours){openingHours=appendIndexToObj(openingHours);var grouped=groupByBusinessHours(openingHours),orderedResultArray=createArrayOfObjWithGroup(grouped),textArray=_.map(orderedResultArray,function(result){result.days=_.map(result.days,function(day){var daysKorean=parseDay(day);return daysKorean}),result.days=tildeArrayValuesToText(result.days);var apendTime="";apendTime=result.start===result.end?"휴무":result.start+" ~ "+result.end;var texts=result.days+" "+apendTime;return texts});return textArray}function appendIndexToObj(openingHours){for(var i=0;i<openingHours.length;i++)openingHours[i].index=i;return openingHours}function groupByBusinessHours(openingHours){var grouped=_.groupBy(openingHours,function(hoursObj){var start=hoursObj.start,end=hoursObj.end,groupCategory=start+end;return groupCategory});return grouped}function createArrayOfObjWithGroup(grouped){for(var keys=Object.keys(grouped),resultArray=[],i=0;i<keys.length;i++){for(var key=keys[i],subOpeningHoursArray=grouped[key],daysResult=[],j=0;j<subOpeningHoursArray.length;j++){var openingHourObj=subOpeningHoursArray[j];daysResult.push(openingHourObj.index)}var start=subOpeningHoursArray[0].start,end=subOpeningHoursArray[0].end;resultArray.push({days:daysResult,start:start,end:end})}var orderedResultArray=_.sortBy(resultArray,function(obj){var day=obj.days[0];return 0===day&&(day=7),day});return orderedResultArray}function parseDay(day){return 0===day?"일요일":1===day?"월":2===day?"화":3===day?"수":4===day?"목":5===day?"금":6===day?"토":void 0}function tildeArrayValuesToText(array){for(var daysInNumbers=_.map(array,function(dayInKorean){return"일요일"===dayInKorean?7:"월"===dayInKorean?1:"화"===dayInKorean?2:"수"===dayInKorean?3:"목"===dayInKorean?4:"금"===dayInKorean?5:"토"===dayInKorean?6:void 0}),i=0;i<daysInNumbers.length-1;i++){var day_1=daysInNumbers[i],day_2=daysInNumbers[i+1];if(Math.abs(day_1-day_2)>1){for(var concatStart=array[0],j=1;j<daysInNumbers.length;j++)concatStart=concatStart+", "+array[j];return concatStart}}return array.length>2?array[0]+" ~ "+array[array.length-1]:2===array.length?array[0]+", "+array[1]:1===array.length?array[0]:void 0}return filter}angular.module("app").filter("groupByOpeningHours",groupByOpeningHours),groupByOpeningHours.$inject=["_"]}(),function(){"use strict";function filterByTag(){function filter(collection,tagName){var resultArray=[];if(collection)for(var i=0;i<collection.length;i++)for(var element=collection[i],j=0;j<element.tags.length;j++){var tag=element.tags[j];tag===tagName&&resultArray.push(element)}return resultArray}return filter}angular.module("app").filter("filterByTag",filterByTag)}(),function(){"use strict";function MainController(MainModel,$ionicModal,$scope,appStorage,$ionicSideMenuDelegate,$state,$timeout){function setAlarm(bool){bool?(appStorage.alarm=!0,MainModel.alarmOn=appStorage.alarm):(appStorage.alarm=!1,MainModel.alarmOn=appStorage.alarm)}function logout(){appStorage.token=null,appStorage.user={},$ionicSideMenuDelegate.toggleLeft(!1),$state.go("main.home")}var Main=this;Main.Model=MainModel,Main.setAlarm=setAlarm,Main.logout=logout,$ionicModal.fromTemplateUrl("state/modal/requestEditProfile.html",{scope:$scope,animation:"mh-slide"}).then(function(modal){Main.profileModal=modal}),$ionicModal.fromTemplateUrl("state/modal/requestAccountTermination.html",{scope:$scope,animation:"mh-slide"}).then(function(modal){Main.terminationModal=modal})}angular.module("app").controller("MainController",MainController),MainController.$inject=["MainModel","$ionicModal","$scope","appStorage","$ionicSideMenuDelegate","$state","$timeout"]}(),function(){"use strict";function MainModel(appStorage){var model={sideMenuList:[{name:"카테고리"},{name:"상품등록"},{name:"판매관리"},{name:"찜/댓글"}],categoryList:[{name:"maleCloth",korean:"남성의류"},{name:"femaleCloth",korean:"여성의류"},{name:"book",korean:"서적"},{name:"help",korean:"도와줘"},{name:"room",korean:"방"},{name:"donation",korean:"재능기부"},{name:"homeDeco",korean:"가전"},{name:"etc",korean:"기타"}],sideMenuSetting:[{name:"프로필 변경"},{name:"쪽지함"},{name:"알림설정"},{name:"회원탈퇴"}],alarmOn:appStorage.alarm};return model}angular.module("app").factory("MainModel",MainModel),MainModel.$inject=["appStorage"]}(),function(){"use strict";function AnnouncementController(AnnouncementModel){var Announcement=this;Announcement.Model=AnnouncementModel}angular.module("app").controller("AnnouncementController",AnnouncementController),AnnouncementController.$inject=["AnnouncementModel"]}(),function(){"use strict";function AnnouncementModel(){var model={};return model}angular.module("app").factory("AnnouncementModel",AnnouncementModel),AnnouncementModel.$inject=[]}(),function(){"use strict";function AnnouncementDetailController($scope,$state,AnnouncementDetailModel,Posts){function onEnter(){Posts.getPosts({id:$state.params.id,populates:"createdBy,photos"}).$promise.then(function(postsWrapper){AnnouncementDetailModel.post=postsWrapper.posts[0]})["catch"](function(err){})}var AnnouncementDetail=this;AnnouncementDetail.Model=AnnouncementDetailModel,$scope.$on("$ionicView.enter",onEnter)}angular.module("app").controller("AnnouncementDetailController",AnnouncementDetailController),AnnouncementDetailController.$inject=["$scope","$state","AnnouncementDetailModel","Posts"]}(),function(){"use strict";function AnnouncementDetailModel(){var model={};return model}angular.module("app").factory("AnnouncementDetailModel",AnnouncementDetailModel),AnnouncementDetailModel.$inject=[]}(),function(){"use strict";function AnnouncementListController($scope,$state,$ionicScrollDelegate,AnnouncementListModel,Posts){function onEnter(){return Posts.getPosts({category:$state.params.by,sort:"id DESC",limit:120}).$promise.then(function(postsWrapper){AnnouncementListModel.posts=postsWrapper.posts,AnnouncementListModel.more=postsWrapper.more,$ionicScrollDelegate.resize()})["catch"](function(err){})}var AnnouncementList=this;AnnouncementList.Model=AnnouncementListModel,$scope.$on("$ionicView.enter",onEnter)}angular.module("app").controller("AnnouncementListController",AnnouncementListController),AnnouncementListController.$inject=["$scope","$state","$ionicScrollDelegate","AnnouncementListModel","Posts"]}(),function(){"use strict";function AnnouncementListModel(){var model={posts:[]};return model}angular.module("app").factory("AnnouncementListModel",AnnouncementListModel),AnnouncementListModel.$inject=[]}(),function(){"use strict";function BoardListController(BoardListModel){var BoardList=this;BoardList.Model=BoardListModel}angular.module("app").controller("BoardListController",BoardListController),BoardListController.$inject=["BoardListModel"]}(),function(){"use strict";function BoardListModel(){var model={};return model}angular.module("app").factory("BoardListModel",BoardListModel),BoardListModel.$inject=[]}(),function(){"use strict";function CategoryController($scope,$state,CategoryModel,LinkService,Posts){function onAfterEnter(){Posts.getPosts({category:$state.params.by,sort:"id DESC",populates:"photos"}).$promise.then(function(postsWrapper){CategoryModel.posts=postsWrapper.posts,CategoryModel.more=postsWrapper.more})["catch"](function(err){})}function onBeforeEnter(){return CategoryModel.loading=!0}var Category=this;Category.Model=CategoryModel,Category.openLink=LinkService.open,$scope.$on("$ionicView.afterEnter",onAfterEnter),$scope.$on("$ionicView.beforeEnter",onBeforeEnter)}angular.module("app").controller("CategoryController",CategoryController),CategoryController.$inject=["$scope","$state","CategoryModel","LinkService","Posts"]}(),function(){"use strict";function CategoryModel(){var model={posts:[]};return model}angular.module("app").factory("CategoryModel",CategoryModel),CategoryModel.$inject=[]}(),function(){"use strict";function DaumMapController(DaumMapModel,$ionicModal,$scope,$state,$stateParams,$timeout,Message){function onAfterEnter(){}var Map=this;Map.Model=DaumMapModel,Map.searchType="address",Map.findMeThenSearchNearBy=DaumMapModel.findMeThenSearchNearBy,$scope.$on("$ionicView.afterEnter",onAfterEnter),Map.searchLocationNearBy=function(value){DaumMapModel.searchLocationNearBy(value)},Map.goToDetailHandler=function(state,params){Message.loading(),DaumMapModel.modal.hide(),$state.go(state,{type:"local",id:DaumMapModel.selectedPlace.id,prev:params.prev})},Map.goToHandler=function(state,params){$state.go(state,params)},Map.hasStateParams=function(paramName){return!!$stateParams[paramName]},Map.selectedPlace=DaumMapModel.selectedPlace,$scope.$on("$ionicView.enter",function(){$ionicModal.fromTemplateUrl("state/daumMap/placeModal.html",{scope:$scope,animation:"slide-in-up"}).then(function(modal){DaumMapModel.modal=modal}),DaumMapModel.domMap.relayout(),$stateParams.id&&DaumMapModel.findPlaceByIdThenDrawAPlace($stateParams.id)}),$scope.$on("$ionicView.afterEnter",function(){Message.loading(),$timeout(function(){DaumMapModel.domMap.relayout(),"true"===$stateParams.findMe?DaumMapModel.findMeThenSearchNearBy():Message.hide()},10)})}angular.module("app").controller("DaumMapController",DaumMapController),DaumMapController.$inject=["DaumMapModel","$ionicModal","$scope","$state","$stateParams","$timeout","Message"]}(),function(){"use strict";function daumMap(DaumMapModel,Places,Bookings,Products,$state,$cordovaGeolocation,Message,$q,$stateParams,daum){return{scope:{markerSrc:"@",markerClickedSrc:"@",markerWidth:"@",markerHeight:"@"},compile:function(element){function resetMarkers(){angular.forEach(DaumMapModel.markers,function(marker){marker.setMap(null)}),DaumMapModel.markers=[]}function requestPlacesWithin(currentCenter){var PlacesPromise={};return PlacesPromise=$stateParams.id?Products.findById({id:$stateParams.id,populates:"photos"}).$promise:Products.getProductWithin({type:"local",latitude:currentCenter.latitude,longitude:currentCenter.longitude,distance:currentCenter.distance||5e3,limit:currentCenter.limit||50}).$promise}function processPin(markerImg,markerClickedImg,scope,placesWrapper){$stateParams.id?DaumMapModel.places=[placesWrapper]:DaumMapModel.places=placesWrapper.products,angular.forEach(DaumMapModel.places,function(place,i){var placeLongitude=place.geoJSON.coordinates[0],placeLatitude=place.geoJSON.coordinates[1],position=new daum.maps.LatLng(placeLatitude,placeLongitude),marker=new daum.maps.Marker({map:map,position:position,title:String(i),image:markerImg,clickable:!0});daum.maps.event.addListener(marker,"click",function(){var marker=this;scope.$apply(function(){angular.forEach(DaumMapModel.markers,function(otherMarker){otherMarker.setImage(markerImg)}),marker.setImage(markerClickedImg);var index=Number(marker.getTitle());Message.loading(),Products.findById({id:DaumMapModel.places[index].id,populates:"photos,createdBy"}).$promise.then(function(data){Message.hide(),DaumMapModel.selectedPlace=data,DaumMapModel.modal.show()},function(err){Message.hide(),Message.alert()})})}),DaumMapModel.markers.push(marker)}),Message.hide()}var DOM=element[0],mapOptions={center:new daum.maps.LatLng(37.5,127),level:4,draggable:!0};daum.maps.disableHD();var map=new daum.maps.Map(DOM,mapOptions),ps=new daum.maps.services.Places,drawMarkers=function(currentCenter,markerImg,markerClickedImg,scope){resetMarkers(),requestPlacesWithin(currentCenter).then(processPin.bind(null,markerImg,markerClickedImg,scope))["catch"](function(err){})};return DaumMapModel.findMeThenSearchNearBy=function(justFind){Message.loading(),$cordovaGeolocation.getCurrentPosition({maximumAge:3e3,timeout:5e3}).then(function(position){return Message.hide(),null==position.coords?(Message.alert("위치 공유가 꺼져있습니다.","위치 공유를 켜주세요."),!1):(DaumMapModel.currentPosition={latitude:position.coords.latitude,longitude:position.coords.longitude},void(justFind||map.setCenter(new daum.maps.LatLng(DaumMapModel.currentPosition.latitude,DaumMapModel.currentPosition.longitude))))},function(){Message.hide(),Message.alert("위치 공유가 꺼져있습니다.","위치 공유를 켜주세요.")})},DaumMapModel.findPlaceByIdThenDrawAPlace=function(id){Message.loading(),Products.findById({id:id,populates:"photos"}).$promise.then(function(place){var currentCenter={longitude:map.getCenter().getLng(),latitude:map.getCenter().getLat()};Math.abs(currentCenter.longitude-place.geoJSON.coordinates[1])<1e-5&&Math.abs(currentCenter.latitude-place.geoJSON.coordinates[0])<1e-5&&map.panTo(new daum.maps.LatLng(currentCenter.longitude+.011,currentCenter.latitude+.011)),map.panTo(new daum.maps.LatLng(place.geoJSON.coordinates[1],place.geoJSON.coordinates[0])),Message.hide()},function(err){})},DaumMapModel.searchLocationNearBy=function(value){return Message.loading(),value?void ps.keywordSearch(value,function(status,data){return void 0===data.places[0]?(Message.hide(),Message.alert("요청하신 장소가 없습니다","다시검색해주세요"),!1):(map.panTo(new daum.maps.LatLng(data.places[0].latitude,data.places[0].longitude)),void Message.hide())},function(err){Message.hide(),Message.alert({title:"위치 공유가 꺼져있습니다.",template:"위치 공유 켜주세요."})}):(Message.hide(),Message.alert("검색하기 알림","장소 값을 넣어서 다시 검색해주세요"),!1)},function(scope){var markerSize=new daum.maps.Size(Number(scope.markerWidth),Number(scope.markerHeight)),markerImg=new daum.maps.MarkerImage(scope.markerSrc,markerSize),markerClickedImg=new daum.maps.MarkerImage(scope.markerClickedSrc,markerSize);map.relayout(),DaumMapModel.domMap=map,daum.maps.event.addListener(map,"idle",function(){map.relayout(),Message.loading();var currentCenter={longitude:map.getCenter().getLng(),latitude:map.getCenter().getLat()};angular.extend(currentCenter,{distance:2e3,limit:20}),drawMarkers(currentCenter,markerImg,markerClickedImg,scope)})}}}}angular.module("app").directive("daumMap",daumMap),daumMap.$inject=["DaumMapModel","Places","Bookings","Products","$state","$cordovaGeolocation","Message","$q","$stateParams","daum"]}(),function(){"use strict";function DaumMapModel(){var model={category:"NAIL-PLACE",currentPosition:{latitude:"FLOAT",longitude:"FLOAT"},markers:[],places:[],selectedPlace:{},modal:{},findMeThenSearchNearBy:function(justFindDontDraw){},searchLocationNearBy:function(){}};return model}angular.module("app").factory("DaumMapModel",DaumMapModel)}(),function(){"use strict";function FavoriteController(FavoriteModel){var Favorite=this;Favorite.Model=FavoriteModel}angular.module("app").controller("FavoriteController",FavoriteController),FavoriteController.$inject=["FavoriteModel"]}(),function(){"use strict";function FavoriteModel(){var model={};return model}angular.module("app").factory("FavoriteModel",FavoriteModel),FavoriteModel.$inject=[]}(),function(){"use strict";function SavedController(SavedModel,Products,appStorage,$scope,$stateParams){function dynamicStyle(post){var result={};return post&&post.isAds?(result.height="120",result.width="99%"):(result.height="160",result.width="33%"),result}function onBeforeEnter(){reset(),"favorited"===$stateParams.by?getProductsWithIds(appStorage.favorite):"commented"===$stateParams.by&&getProductsWithComments();
}function reset(){SavedModel.posts=[]}function getProductsWithIds(ids){Products.getProductsWithIds({id:ids}).$promise.then(function(products){SavedModel.posts=products})["catch"](function(err){})}function getProductsWithComments(){Products.getProductsWithComments({}).$promise.then(function(products){SavedModel.posts=products})["catch"](function(err){})}var Saved=this;Saved.Model=SavedModel,Saved.dynamicStyle=dynamicStyle,$scope.$on("$ionicView.beforeEnter",onBeforeEnter)}angular.module("app").controller("SavedController",SavedController),SavedController.$inject=["SavedModel","Products","appStorage","$scope","$stateParams"]}(),function(){"use strict";function SavedModel(MockService){var model={posts:[]};return model}angular.module("app").factory("SavedModel",SavedModel),SavedModel.$inject=["MockService"]}(),function(){"use strict";function googleMap(DaumMapModel,Places,Bookings,Products,$state,$cordovaGeolocation,Message,$q,$stateParams,daum,google,$window){return{scope:{markerSrc:"@",markerClickedSrc:"@",markerWidth:"@",markerHeight:"@"},compile:function(element){var DOM=element[0],mapOptions={center:{lat:-34.397,lng:150.644},zoom:8,disableDefaultUI:!0};new google.maps.Map(DOM,mapOptions);return function(scope){}}}}angular.module("app").directive("googleMap",googleMap),googleMap.$inject=["DaumMapModel","Places","Bookings","Products","$state","$cordovaGeolocation","Message","$q","$stateParams","daum","google","$window"]}(),function(){"use strict";function HomeController(HomeModel,LinkService,Message){function share(){var title="학생들의 중고거래장터 학교장터!",content="집안에 잠들어있는 필요없는 물건들을 돈으로 바꿔가세요~",url="https://play.google.com/store/apps/details?id=kr.co.schoolmarket&hl=ko";LinkService.share(title,content,url)}function showMessage(){return Message.alert("유학장터 알림","유학장터 준비 중입니다.")}var Home=this;Home.Model=HomeModel,Home.share=share,Home.showMessage=showMessage}angular.module("app").controller("HomeController",HomeController),HomeController.$inject=["HomeModel","LinkService","Message"]}(),function(){"use strict";function HomeModel(){var model={};return model}angular.module("app").factory("HomeModel",HomeModel),HomeModel.$inject=[]}(),function(){"use strict";function LoginController(LoginModel,Users,appStorage,$state,AuthService,Message){function loginHandler(){Message.loading(),Users.login({},{identifier:LoginModel.form.email,password:LoginModel.form.password}).$promise.then(function(authData){appStorage.token=authData.token,appStorage.user=authData.user,Message.hide(),$state.go("main.home")})["catch"](function(error){Message.hide(),Message.alert("로그인 알림","이메일이나 암호가 잘못 되었습니다.").then(function(){LoginModel.form={}})})}function loginWithFacebook(){return Message.loading(),AuthService.loginWithFacebook().then(function(data){Message.hide(),$state.go("main.home")},function(error){})}var Login=this;Login.Model=LoginModel,Login.loginHandler=loginHandler,Login.loginWithFacebook=loginWithFacebook}angular.module("app").controller("LoginController",LoginController),LoginController.$inject=["LoginModel","Users","appStorage","$state","AuthService","Message"]}(),function(){"use strict";function LoginModel(){var model={};return model}angular.module("app").factory("LoginModel",LoginModel),LoginModel.$inject=[]}(),function(){"use strict";function MapController(MapModel){var Map=this;Map.Model=MapModel}angular.module("app").controller("MapController",MapController),MapController.$inject=["MapModel"]}(),function(){"use strict";function MapModel(){var model={};return model}angular.module("app").factory("MapModel",MapModel),MapModel.$inject=[]}(),function(){"use strict";function MessageDetailController(MessageDetailModel,$scope,Messages,$stateParams,Message,$state){function onBeforeEnter(){Messages.readMessagesFrom({from:$stateParams.from}).$promise.then(function(messagesWrapper){MessageDetail.newMessage=null,MessageDetailModel.messages=messagesWrapper.messages})["catch"](function(err){})}function postMessage(){var message=MessageDetail.newMessage;Message.loading(),Messages.sendMessage({},{message:message,to:$stateParams.from}).$promise.then(function(message){$state.reload(),Message.hide()})["catch"](function(err){Message.hide()})}var MessageDetail=this;MessageDetail.Model=MessageDetailModel,MessageDetail.postMessage=postMessage,$scope.$on("$ionicView.beforeEnter",onBeforeEnter)}angular.module("app").controller("MessageDetailController",MessageDetailController),MessageDetailController.$inject=["MessageDetailModel","$scope","Messages","$stateParams","Message","$state"]}(),function(){"use strict";function MessageDetailModel(){var model={messages:[]};return model}angular.module("app").factory("MessageDetailModel",MessageDetailModel),MessageDetailModel.$inject=[]}(),function(){"use strict";function MessageListController(MessageListModel,$scope,Messages,Message){function onBeforeEnter(){Message.loading(),Messages.getMyInboxSenderList({}).$promise.then(function(messagesWrapper){Message.hide(),MessageListModel.messages=messagesWrapper.senders})["catch"](function(err){Message.hide()})}var MessageList=this;MessageList.Model=MessageListModel,$scope.$on("$ionicView.beforeEnter",onBeforeEnter)}angular.module("app").controller("MessageListController",MessageListController),MessageListController.$inject=["MessageListModel","$scope","Messages","Message"]}(),function(){"use strict";function MessageListModel(){var model={messages:[]};return model}angular.module("app").factory("MessageListModel",MessageListModel),MessageListModel.$inject=[]}(),function(){"use strict";function PostDetailController(PostDetailModel,Products,Comments,Users,appStorage,$ionicModal,$scope,LinkService,FavoriteService,$state,$stateParams,Message,$ionicScrollDelegate,$ionicSlideBoxDelegate,_,$timeout,Messages,$ionicHistory){function getUserPhoto(user){return user&&user.profile_picture&&user.profile_picture.url?user.profile_picture.url:user&&user.profile_image?user.profile_image:void 0}function getUserNickname(createdBy){return createdBy&&createdBy.nickname}function addComment(comment){return appStorage.token?void Comments.addCommentToPost({},{content:comment,product:$stateParams.id,isParent:!0}).$promise.then(function(data){Message.alert("댓글달기 알림","댓글을 성공적으로 작성하셨습니다.").then(function(){resetComment(),$state.reload()})})["catch"](function(err){}):PostDetail.requestLoginModal.show()}function reply(){if(!appStorage.token)return PostDetail.requestLoginModal.show();var parentId=PostDetailModel.commentToReply.id,commentReply=PostDetail.commentReply;return Comments.reply({},{parent:parentId,content:commentReply,product:$stateParams.id}).$promise.then(function(){return Message.alert("답변하기 알림","답변을 성공적으로 하였습니다.")}).then(function(){PostDetail.replyModal.hide(),$state.reload()})["catch"](function(err){})}function sendMessage(){return appStorage.token?(PostDetail.currentDate=new Date,void PostDetail.sendMessageModal.show()):Message.alert("쪽지보내기 알림","로그인을 해주세요").then(function(){$state.go("main.login")})}function postMessage(){var message=PostDetail.message;Message.loading(),Messages.sendMessage({},{message:message,to:PostDetailModel.post.createdBy.id}).$promise.then(function(message){return Message.hide(),Message.alert("메세지 작성 알림","메세지가 성공적으로 작성되었습니다")}).then(function(){PostDetail.sendMessageModal.hide()})["catch"](function(err){Message.hide()})}function toggleSaveToFavorite(postId){FavoriteService.isFavorite(postId)?FavoriteService.unlike(postId):FavoriteService.isFavorite(postId)||FavoriteService.like(postId),FavoriteService.toggleSaveToFavorite(postId)}function requestLoginHandler(){PostDetail.requestLoginModal.hide().then(function(){$state.go("main.login")})}function goBack(){return"main.daumMap"===$stateParams.prev?$state.go("main.daumMap",{id:$stateParams.id}):void $ionicHistory.goBack()}function replyModalHandler(comment){PostDetailModel.commentToReply=comment,PostDetail.replyModal.show()}function onBeforeEnter(){Message.loading(),reset(),findById($stateParams.id)}function resetComment(){PostDetail.comment=null}function reset(){PostDetail.commentReply=null,PostDetail.message=null,PostDetail.comment=null,PostDetailModel.post={},PostDetailModel.comments=[]}function findById(id){findAProductWithId(id).then(findCommentsWithPostId).then(processComments)["catch"](function(err){Message.hide()})}function findAProductWithId(id){return Message.loading(),Products.findById({id:id,populates:"photos,createdBy"}).$promise}function findCommentsWithPostId(post){if(PostDetailModel.post=post,$ionicSlideBoxDelegate.update(),$ionicScrollDelegate.resize(),!appStorage.token)throw new Error("not logged in");return Comments.find({productId:post.id}).$promise}function processComments(comments){PostDetailModel.comments=comments,Message.hide()}var PostDetail=this;PostDetail.Model=PostDetailModel,PostDetail.comment=null,PostDetail.commentReply=null,PostDetail.isFavorite=FavoriteService.isFavorite,PostDetail.call=LinkService.call,PostDetail.getUserPhoto=getUserPhoto,PostDetail.getUserNickname=getUserNickname,PostDetail.addComment=addComment,PostDetail.reply=reply,PostDetail.sendMessage=sendMessage,PostDetail.postMessage=postMessage,PostDetail.toggleSaveToFavorite=toggleSaveToFavorite,PostDetail.requestLoginHandler=requestLoginHandler,PostDetail.goBack=goBack,PostDetail.replyModalHandler=replyModalHandler,$scope.$on("$ionicView.beforeEnter",onBeforeEnter),$ionicModal.fromTemplateUrl("state/modal/requestLogin.html",{scope:$scope,animation:"mh-slide"}).then(function(modal){PostDetail.requestLoginModal=modal}),$ionicModal.fromTemplateUrl("state/modal/sendMessage.html",{scope:$scope,animation:"mh-slide"}).then(function(modal){PostDetail.sendMessageModal=modal}),$ionicModal.fromTemplateUrl("state/modal/replyModal.html",{scope:$scope,animation:"mh-slide"}).then(function(modal){PostDetail.replyModal=modal}),$ionicModal.fromTemplateUrl("state/modal/fullSlideBoxModal.html",{scope:$scope,animation:"mh-slide"}).then(function(modal){PostDetail.slideBoxModal=modal})}angular.module("app").controller("PostDetailController",PostDetailController),PostDetailController.$inject=["PostDetailModel","Products","Comments","Users","appStorage","$ionicModal","$scope","LinkService","FavoriteService","$state","$stateParams","Message","$ionicScrollDelegate","$ionicSlideBoxDelegate","_","$timeout","Messages","$ionicHistory"]}(),function(){"use strict";function PostDetailModel(){var model={post:{},comments:[],commentToReply:{}};return model}angular.module("app").factory("PostDetailModel",PostDetailModel),PostDetailModel.$inject=[]}(),function(){"use strict";function MyPostListController(Products,MyPostListModel,$state,$stateParams,$timeout,Message,$scope){function onBeforeEnter(){Message.loading(),Products.getMyProducts({type:$stateParams.type,populates:"photos"}).$promise.then(function(productsWrapper){MyPostListModel.posts=productsWrapper.products,Message.hide()})["catch"](function(err){Message.hide(),Message.alert()})}function dynamicStyle(post){var result={};return post&&post.isAds?(result.height="120",result.width="99%"):(result.height="160",result.width="33%"),result}function select(postId){togglePop(MyPostListModel.selectedPosts,postId)}function update(){return 0===MyPostListModel.selectedPosts.length?Message.alert("수정하기 알림","수정하실 상품을 먼저 골라주세요").then(function(){}):MyPostListModel.selectedPosts.length>1?Message.alert("수정하기 알림","수정하실 상품을 1개만 골라주세요").then(function(){MyPostListModel.selectedPosts=[]}):(1===MyPostListModel.selectedPosts.length&&$state.go("main.postRegister",{type:$stateParams.type,id:MyPostListModel.selectedPosts[0],method:"update"}),void(MyPostListModel.selectedPosts=[]))}function setSoldOut(){if(0===MyPostListModel.selectedPosts.length)return Message.alert("Sold Out 알림","Sold Out 하실 상품들을 먼저 골라주세요");Message.loading();var productIds=MyPostListModel.selectedPosts;Products.setSoldOut({id:productIds}).$promise.then(function(data){$state.reload(),Message.hide()})["catch"](function(err){Message.hide()})}function cancelSoldOut(postId){Message.loading(),Products.unsetSoldOut({id:postId}).$promise.then(function(data){$state.reload(),Message.hide()})["catch"](function(err){Message.hide()})}function destroy(){return 0===MyPostListModel.selectedPosts.length?Message.alert("삭제하기 알림","삭제하기 하실 상품들을 먼저 골라주세요"):(Message.loading(),void Products.removeProducts({id:MyPostListModel.selectedPosts}).$promise.then(function(postsArray){MyPostListModel.selectedPosts=[],$state.reload(),Message.hide()})["catch"](function(err){MyPostListModel.selectedPosts=[],Message.hide()}))}function toggleUpdate(){MyPostListModel.status="update"}function toggleSetSoldOut(){MyPostListModel.status="soldOut"}function toggleDestroy(){MyPostListModel.status="destroy",MyPostListModel.postsToDestroy=[]}function togglePop(array,id){-1!==array.indexOf(id)?array.splice(array.indexOf(id),1):array.push(id)}var MyPostList=this;MyPostList.Model=MyPostListModel,MyPostList.dynamicStyle=dynamicStyle,MyPostList.select=select,MyPostList.update=update,MyPostList.setSoldOut=setSoldOut,MyPostList.cancelSoldOut=cancelSoldOut,MyPostList.destroy=destroy,MyPostList.toggleUpdate=toggleUpdate,MyPostList.toggleSetSoldOut=toggleSetSoldOut,MyPostList.toggleDestroy=toggleDestroy,$scope.$on("$ionicView.beforeEnter",onBeforeEnter)}angular.module("app").controller("MyPostListController",MyPostListController),MyPostListController.$inject=["Products","MyPostListModel","$state","$stateParams","$timeout","Message","$scope"]}(),function(){"use strict";function MyPostListModel(){var model={posts:[],selectedPosts:[],postsToUpdate:[],postsToSetSoldOut:[],postsToDestroy:[]};return model}angular.module("app").factory("MyPostListModel",MyPostListModel),MyPostListModel.$inject=[]}(),function(){"use strict";function PostRegisterController($stateParams,$ionicScrollDelegate,$timeout,$scope,$state,$q,PostRegisterModel,MainModel,Message,ImageService,Products,daum,appStorage,Schools,_){function onBeforeEnter(){return"update"===$stateParams.method?(PostRegisterModel.form.photos=[],Products.findById({id:$stateParams.id,populates:"photos"}).$promise.then(function(product){var form=PostRegisterModel.form;form.category=product.category,form.name=product.name,form.description=product.description,form.price=Number(product.price),form.address=product.address,form.geoJSON=product.geoJSON,form.showPhone=product.showPhone,form.id=$stateParams.id;var tags=product.school.split(", ");PostRegister.tags=_.map(tags,function(tag){return{text:tag}}),PostRegisterModel.imageDataArray=product.photos})["catch"](function(err){})):void 0}function getSchools(){return Schools}function toggleShowPhone(bool){bool?PostRegisterModel.form.showPhone=!0:PostRegisterModel.form.showPhone=!1}function create(){return Message.loading(),"local"===$stateParams.type?PostRegisterModel.form.type="local":"abroad"===$stateParams.type&&(PostRegisterModel.form.type="abroad"),postProduct().then(function(){return Message.hide(),Message.alert("상품 등록 알림","상품이 성공적으로 등록되었습니다.")}).then(function(messageResp){reset(),$state.go("main.postList",{type:$stateParams.type})})["catch"](function(err){Message.hide()})}function getPhoto(index){var array=PostRegisterModel.imageDataArray;return array[index]&&"string"!=typeof array[index]?array[index].url:array[index]&&"string"==typeof array[index]?array[index]:void 0}function removePhoto(index){var array=PostRegisterModel.imageDataArray;array.splice(index,1)}function showCircle(index){var array=PostRegisterModel.imageDataArray;return array[index]?!0:!1}function update(){Message.loading(),"local"===$stateParams.type?PostRegisterModel.form.type="local":"abroad"===$stateParams.type&&(PostRegisterModel.form.type="abroad");for(var array=PostRegisterModel.imageDataArray,count=0,i=0;i<array.length;i++)array[i]&&"string"!=typeof array[i]&&(PostRegisterModel.form.photos.push(array[i]),count++);return array.splice(0,count),postProduct("PUT").then(function(){return Message.hide(),Message.alert("상품 업데이트 알림","상품이 성공적으로 업데이트 되었습니다.")}).then(function(messageResp){reset(),$state.go("main.postList",{type:$stateParams.type})})["catch"](function(err){Message.hide()})}function getImage(from){var existingPhotos=PostRegister.Model.form.photos;existingPhotos&&0!==existingPhotos.length||(existingPhotos=[]),PostRegisterModel.imageDataArray.length+existingPhotos.length>4&&Message.alert("사진올리기 알림","사진은 최대 5개 올리실수 있습니다."),ImageService.get({from:from,fileUris:PostRegisterModel.imageFileArray,dataUris:PostRegisterModel.imageDataArray})}function postProduct(method){var ok=validateForm(),deferred=$q.defer();if(!ok)return deferred.reject(!1),deferred.promise;PostRegisterModel.form.phone=Number(appStorage.user.phone);var schools=_.map(PostRegister.tags,function(tagObj){return tagObj.text});return PostRegisterModel.form.school=schools.join(", "),ImageService.post({url:"/product",dataUris:PostRegisterModel.imageDataArray,fields:PostRegisterModel.form},method)}function reset(){PostRegisterModel.form={showPhone:!0},$timeout(function(){PostRegisterModel.imageFileArray=[],PostRegisterModel.imageDataArray=[],ImageService.clean()},0)}function validateForm(){var form=PostRegisterModel.form;Message.alert.bind(null,"상품등록 알림");return(PostRegisterModel.imageDataArray[0]||"update"===$stateParams.method)&&(form.category||"local"!==$stateParams.type)&&form.name&&form.description&&(PostRegister.tags&&PostRegister.tags[0]||"local"!==$stateParams.type)&&(form.price||"local"!==$stateParams.type)&&(form.geoJSON||"update"===$stateParams.method||"local"!==$stateParams.type)?!0:!1}function searchPlace(){if(!PostRegisterModel.form.address)return!1;var ps=new daum.maps.services.Places;Message.loading(),ps.keywordSearch(PostRegisterModel.form.address,function(status,data){return Message.hide(),void 0===data.places[0]?(Message.alert("요청하신 장소가 없습니다","다시검색해주세요"),!1):void(PostRegisterModel.places=data.places)},function(err){Message.hide(),Message.alert()})}function selectPlace(placeObj){PostRegisterModel.form.address=placeObj.address,PostRegisterModel.form.geoJSON={type:"Point",coordinates:[Number(placeObj.longitude),Number(placeObj.latitude)]},PostRegisterModel.places=[],$ionicScrollDelegate.resize()}var PostRegister=this;PostRegister.Model=PostRegisterModel,PostRegisterModel.form.photos=[],PostRegister.categoryList=MainModel.categoryList,PostRegister.toggleShowPhone=toggleShowPhone,PostRegister.create=create,PostRegister.update=update,PostRegister.reset=reset,PostRegister.getImage=getImage,PostRegister.searchPlace=searchPlace,PostRegister.selectPlace=selectPlace,PostRegister.getPhoto=getPhoto,PostRegister.removePhoto=removePhoto,PostRegister.showCircle=showCircle,PostRegister.getSchools=getSchools,$scope.$on("$ionicView.beforeEnter",onBeforeEnter)}angular.module("app").controller("PostRegisterController",PostRegisterController),PostRegisterController.$inject=["$stateParams","$ionicScrollDelegate","$timeout","$scope","$state","$q","PostRegisterModel","MainModel","Message","ImageService","Products","daum","appStorage","Schools","_"]}(),function(){"use strict";function PostRegisterModel(){var model={form:{},places:[],imageFileArray:[],imageDataArray:[]};return model}angular.module("app").factory("PostRegisterModel",PostRegisterModel),PostRegisterModel.$inject=[]}(),function(){"use strict";function PostListController($scope,$timeout,$stateParams,$ionicScrollDelegate,$q,$state,$window,Products,PostListModel,Message,LinkService){function search(){searchMode=!0,Message.loading();var abroadSearch,adsPromise;"abroad"===$state.params.type?abroadSearch=!0:adsPromise=Products.getProducts({category:"ads",isAds:!0,limit:10,populates:"photos",filter:PostList.searchWord}).$promise;var productsPromise=Products.getProducts({type:$stateParams.type,limit:12,populates:"photos",sort:"id DESC",soldOut:!1,filter:PostList.searchWord}).$promise;$q.all([productsPromise,adsPromise]).then(function(array){var productsWrapper=array[0],adsWrapper=array[1];adsWrapper&&(PostListModel.ads=adsWrapper.products),adsAdded=0,PostListModel.prePosts=[],angular.forEach(productsWrapper.products,function(product){PostListModel.prePosts.push(product)}),PostListModel.more=productsWrapper.more,addAdsToArray(productsWrapper.products,adsOnRow),PostListModel.posts=productsWrapper.products,$ionicScrollDelegate.resize(),Message.hide()})["catch"](function(err){Message.hide()})}function dynamicStyle(post){var result={};return post&&post.isAds?(result.height="120",result.width="99%"):(result.height="160",result.width="33%"),result}function onBeforeEnter(){getProducts()}function getProducts(){searchMode=!1;var productsPromise=Products.getProducts({category:$stateParams.category,type:$stateParams.type,sort:"id DESC",soldOut:!1,limit:12,populates:"photos"}).$promise,adsPromise=Products.getProducts({category:"ads",isAds:!0,limit:10,populates:"photos"}).$promise;$q.all([productsPromise,adsPromise]).then(function(array){var productsWrapper=array[0],adsWrapper=array[1];PostListModel.ads=adsWrapper.products,PostListModel.prePosts=[],angular.forEach(productsWrapper.products,function(product){PostListModel.prePosts.push(product)}),PostListModel.more=productsWrapper.more,addAdsToArray(productsWrapper.products,adsOnRow),$ionicScrollDelegate.resize(),PostListModel.posts=productsWrapper.products})["catch"](function(err){Message.alert()})}function getMoreProducts(){var promise;searchMode===!1?promise=Products.getProducts({category:$stateParams.category,type:$stateParams.type,sort:"id DESC",skip:PostListModel.prePosts.length,soldOut:!1,limit:12,populates:"photos"}).$promise:searchMode===!0&&(promise=Products.getProducts({skip:PostListModel.prePosts.length,type:$stateParams.type,limit:12,soldOut:!1,populates:"photos",sort:"id DESC",filter:PostList.searchWord}).$promise),promise.then(function(productsWrapper){PostListModel.more=productsWrapper.more,angular.forEach(productsWrapper.products,function(product){PostListModel.prePosts.push(product)}),addAdsToArray(productsWrapper.products,adsOnRow),angular.forEach(productsWrapper.products,function(product){PostListModel.posts.push(product)}),$scope.$broadcast("scroll.infiniteScrollComplete"),$ionicScrollDelegate.resize()})["catch"](function(err){})}function checkForMore(){return PostListModel.more}function showAlert(){Message.alert("sold out 알림","이미 팔린 물품입니다.")}function addAdsToArray(productList,adsOnRow){function indexExists(index){return-1!==adsIndexes.indexOf(index)}function addAds(index1,index2){productList.length>=3*adsOnRow&&indexExists(index1)&&productList.splice(3*adsOnRow,0,_.where(PostListModel.ads,{index:index1})[0]),productList.length>=3*adsOnRow*2+1&&indexExists(index2)&&indexExists(index1)?productList.splice(3*adsOnRow*2+1,0,_.where(PostListModel.ads,{index:index2})[0]):productList.length>=3*adsOnRow*2&&indexExists(index2)&&productList.splice(3*adsOnRow*2,0,_.where(PostListModel.ads,{index:index2})[0])}var prePosts=PostListModel.prePosts;if(0===PostListModel.ads.length)return!1;if(adsAdded>PostListModel.ads.length-1)return!1;adsAdded>=PostListModel.ads.length&&(adsAdded=0);for(var adsIndexes=_.pluck(PostListModel.ads,"index"),i=10;i>=2;i-=2)if(prePosts.length>3*adsOnRow*(i-1)){addAds(i-1,i);break}}var _=$window._,adsOnRow=2,adsAdded=0,PostList=this,searchMode=!1;PostList.Model=PostListModel,PostList.dynamicStyle=dynamicStyle,PostList.searchWord=null,PostList.search=search,PostList.openLink=LinkService.open,PostList.getMoreProducts=getMoreProducts,PostList.checkForMore=checkForMore,PostList.showAlert=showAlert,$scope.$on("$ionicView.beforeEnter",onBeforeEnter)}angular.module("app").controller("PostListController",PostListController),PostListController.$inject=["$scope","$timeout","$stateParams","$ionicScrollDelegate","$q","$state","$window","Products","PostListModel","Message","LinkService"]}(),function(){"use strict";function PostListModel(){var model={posts:[],prePosts:[],ads:[{id:1,title:"",summary:"",content:"",url:"http://www.naver.com",photos:[{url:"http://lorempixel.com/200/100/nature/1"}],isAds:!0},{id:2,title:"",summary:"",content:"",url:"http://www.naver.com",photos:[{url:"http://lorempixel.com/200/100/nature/2"}],isAds:!0},{id:3,title:"",summary:"",content:"",url:"http://www.naver.com",photos:[{url:"http://lorempixel.com/200/100/nature/3"}],isAds:!0},{id:4,title:"",summary:"",content:"",url:"http://www.naver.com",photos:[{url:"http://lorempixel.com/200/100/nature/4"}],isAds:!0}]};return model}angular.module("app").factory("PostListModel",PostListModel),PostListModel.$inject=[]}(),function(){"use strict";function ProfileController(ProfileModel,appStorage,ImageService,Message,$rootScope,$state,Users,$scope){function update(){return Message.loading(),ProfileModel.form.phone||delete ProfileModel.form.phone,ProfileModel.form.nickname||delete ProfileModel.form.nickname,0===ProfileModel.dataArray.length?Users.updateUser({},ProfileModel.form).$promise.then(function(userArray){var user=userArray[0];return setAppStorageValues(user),Message.hide(),Message.alert("프로필 업데이트 알림","업데이트가 성공적으로 되었습니다")}).then(function(){$state.go("main.home")})["catch"](function(err){Message.hide()}):void(ProfileModel.dataArray.length>0&&ImageService.post({url:"/user/updateWithImage",dataUris:ProfileModel.dataArray,fields:ProfileModel.form},"PUT").then(function(dataWrapper){var user=dataWrapper.data;return setAppStorageValues(user),Message.alert("프로필 업데이트 알림","업데이트가 성공적으로 되었습니다")}).then(function(){$state.go("main.home")})["catch"](function(err){Message.hide(),Message.alert("프로필 업데이트 알림","업데이트가 실패하였습니다, 나중에 다시 해주세요.")}))}function getPicture(from){return ProfileModel.fileArray.length>0||ProfileModel.dataArray.length>0?Message.alert("사진 고르기 알림","이미 사진을 고르셨습니다."):ImageService.get({from:from,fileUris:ProfileModel.fileArray,dataUris:ProfileModel.dataArray})}function onBeforeEnter(){var form=ProfileModel.form;form.nickname=appStorage.user.nickname,form.phone=Number(appStorage.user.phone)}function setAppStorageValues(user){appStorage.user.profile_picture=user.profile_picture&&user.profile_picture.url||user.profile_image,appStorage.user.nickname=user.nickname,appStorage.user.phone=user.phone}function reset(){ProfileModel.form={profile_picture:null,nickname:null},ProfileModel.fileArray=[],ProfileModel.dataArray=[]}function goBack(){return reset(),$rootScope.goBack()}var Profile=this;Profile.Model=ProfileModel,Profile.update=update,Profile.getPicture=getPicture,Profile.goBack=goBack,$scope.$on("$ionicView.beforeEnter",onBeforeEnter)}angular.module("app").controller("ProfileController",ProfileController),ProfileController.$inject=["ProfileModel","appStorage","ImageService","Message","$rootScope","$state","Users","$scope"]}(),function(){"use strict";function ProfileModel(){var model={form:{},fileArray:[],dataArray:[]};return model}angular.module("app").factory("ProfileModel",ProfileModel),ProfileModel.$inject=[]}(),function(){"use strict";function SignupController(SignupModel,Message,Users,$state){function handleSignup(){return SignupModel.form.password!==SignupModel.passwordConfirm?Message.alert("비밀번호 알림","비밀번호를 다시 한번 확인해주시고 입력해주세요"):void Users.register({},SignupModel.form).$promise.then(function(data){Message.alert("회원가입 성공","회원가입을 성공하였습니다.").then(function(){reset(),$state.go("main.login")})},function(err){Message.hide(),Message.alert("가입실패","다시 입력해주세요").then(function(){reset()})})}function reset(){var resetObj={email:null,password:null};angular.copy(resetObj,SignupModel.form)}var Signup=this;Signup.Model=SignupModel,Signup.handleSignup=handleSignup}angular.module("app").controller("SignupController",SignupController),SignupController.$inject=["SignupModel","Message","Users","$state"]}(),function(){"use strict";function SignupModel(){var model={form:{email:null,password:null},agree:!1,"private":!1};return model}angular.module("app").factory("SignupModel",SignupModel),SignupModel.$inject=[]}();